{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/helpers/Cookie.ts","webpack:///./src/Constants.ts","webpack:///./src/utils.ts","webpack:///./src/polyfills/ccsdk.polyfill.ts","webpack:///./src/CCSDKEntry.ts","webpack:///./src/SurveyManager.ts","webpack:///./src/WebSurvey.ts","webpack:///./src/WebSurveyHandler.ts","webpack:///./src/WebSurveyContainer.ts","webpack:///./src/global.scss?46dc","webpack:///./src/global.scss","webpack:///./node_modules/rtl-css-loader/lib/css-base.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./src/TriggerManager.ts","webpack:///./src/WebSurveyTriggers.ts","webpack:///./src/helpers/TriggerUtils.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Cookie","set","days","path","date","Date","setTime","getTime","expires","toUTCString","dir","document","cookie","nameEQ","ca","split","length","charAt","substring","indexOf","delete","undefined","getParameterByName","url","window","location","href","replace","results","RegExp","exec","decodeURIComponent","Constants","CCTriggerPageStartTime","CCTriggerPageElapsedTime","CCTriggerSiteStartTime","CCTriggerSiteElapsedTime","CCTriggerSitePageViewCount","CCTriggerIndividualPageViewCount","SURVEY_IMPRESSION_EVENT","SURVEY_START_EVENT","SURVEY_DATA_EVENT","SURVEY_END_EVENT","SURVEY_CLOSE_EVENT","SURVEY_QUESTION_EVENT","SURVEY_ANSWER_EVENT","SURVEY_CLICK_EVENT","GRANT_TYPE","AUTHORIZATION","AUTHORIZATION_BEARER","SURVEY_CLIENT","DEFAULT_PREFILL_QUEUE","DIRECT","BY_TAG","BY_NOTE","triggerEvent","el","eventName","data","CustomEvent","event","detail","createEvent","initCustomEvent","dispatchEvent","type","payload","bubbles","cancelable","querySelector","toStr","isCallable","maxSafeInteger","toLength","Array","from","toString","fn","Math","pow","len","number","Number","isNaN","isFinite","floor","abs","toInteger","min","max","arrayLike","items","TypeError","T","mapFn","arguments","kValue","A","this","k","params","evt","Event","find","predicate","thisArg","configurable","writable","localCCSDK","Cookie_1","SurveyManager_1","WebSurvey_1","TriggerManager_1","WebSurveyTriggers_1","Constants_1","setUpEnv","init","destroy","trigger","hide","show","on","prefill","prefillByTag","prefillByNote","CCSDK","queue","q","ccsdkDebug","console","log","args","functionName","splice","apply","_i","queue_1","eventCCReady","initEvent","surveyToken","trim","config","isActive","SurveyManager","surveyInstances","addSurvey","WebSurvey","TriggerManager","triggerInstances","WebSurveyTriggers","trackEvent","enqueueSurvey","setUpCallBack","prefillQueue","object_1","tracking","token","action","keys","forEach","x","addSurveyToQueue","isMobile","target","callback","savePrefillAsObject","restArgs","_a","push","globalSurveyRunning","innerWidth","initializeSurvey","surveyId","setupSurvey","info","tokenId","page","surveyInstance","processQueueInterval","setInterval","processQueueIntervalCB","surveyQueue","pop","setTimeout","destroyIntervals","clearInterval","setSurveyRunning","globalSurveyStartTime","unsetSurveyRunning","WebSurveyHandler_1","utils_1","handler","WebSurveyHandler","getCoolDown","getTokenAnswered","container","browserNotSuitable","setCoolDownPeriod","_this","survey","setTriggers","addEventListener","e","cb","WebSurveyContainer_1","_hideCloseButton","WebSurveyContainer","hideCloseButton","closeCallback","open","setSource","getUrl","close","campaign","coolDownPeriod","_iframeOpened","restrictedOrigin","readyForPrefills","_prefills","getSurvey","iframe","iframeContainer","listenForMessages","getIframe","getIframeContainer","appendChild","onwheel","ev","stopPropagation","onresize","closeButton","style","bottom","clientHeight","createElement","classList","add","transform","border","borderColor","brandColor","getCloseButton","iframeHeight","button","backgroundColor","innerHTML","visibility","removeChild","body","err","error","pageLoad","src","urlSource","that","onload","websurveyConfigCallBack","message","JSON","parse","pagedLayout","setConfig","removeEventListener","stringify","options","screenWidth","screenHeight","innerHeight","contentWindow","postMessage","attachIframe","pollForPageLoad","postPrefillsToSurvey","eventType","response","START","ANSWERED","DATA","END","QUESTION","prefills","prefillType","content","locals","getElementsByTagName","getAttribute","list","result","item","join","mediaQuery","alreadyImportedModules","id","memo","stylesInDom","isOldIE","all","atob","getElement","selector","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","sourceMap","insertStyleElement","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","firstChild","removeStyleElement","parentNode","idx","createStyleElement","attrs","addAttrs","setAttribute","obj","update","remove","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","btoa","link","rel","createLinkElement","autoFixUrls","convertToAbsoluteUrls","unescape","encodeURIComponent","blob","oldSrc","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","cssNode","childNodes","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","$1","test","sitePageViewCount","parseInt","match","lastIndexOf","individualPageViewCount","click","onscroll","doc","documentElement","top","pageXOffset","scrollLeft","clientLeft","pageYOffset","scrollTop","clientTop","ccsdkTopOffset","processScrollTriggers","onclick","evaluateCallBack","triggerInterval","processIntervalTriggers","evaluateTriggers","scrollY","TriggerUtils_1","SUPPORTED_TRIGGERS","scrollTriggerPoint","scrollHeight","showSurvey","pageStartTime","pageTime","TriggerUtils","checkTimeCondition","checkScroll","checkInUrl","inUrl","minPageTime","round","scrollNow","minScrollPixels","checkPageCount","pageCount","minPageCount"],"mappings":"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","file":"cc.en.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","class Cookie {\n    /**\n     * Set/Overwrite a cookie value\n     *\n     * @param name\n     * @param value\n     * @param days      OPTIONAL Days till this cookie will stay valid. Default is current session\n     * @param path      OPTIONAL domain root will be used by default\n     */\n    static set(name : any, value : any, days : any, path : any) {\n      if (days) {\n          var date = new Date();\n              date.setTime(date.getTime()+(days*24*60*60*1000));\n          var expires = \"; expires=\"+date.toUTCString();\n      } else var expires = \"\";\n\n      var dir = path || '/';\n      document.cookie = name+\"=\"+value+expires+\"; path=\"+dir;\n  }\n\n  /**\n   * Retrieve a cookie value\n   *\n   * @param name\n   * @return String|null\n   */\n  static get(name) {\n      var nameEQ = name + \"=\";\n      var ca = document.cookie.split(';');\n      for(var i=0;i < ca.length;i++) {\n          var c = ca[i];\n          while (c.charAt(0)==' ') c = c.substring(1,c.length);\n          if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\n      }\n      return null;\n  }\n\n  /**\n   * Remove a cookie\n   *\n   * @param name\n   */\n  static delete(name) {\n    Cookie.set(name,\"\",-1, undefined);\n  }\n\n  static getParameterByName(name : string, url : any) {\n    if (!url) url = window.location.href;\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n        results = regex.exec(url);\n    if (!results) return null;\n    if (!results[2]) return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n  }\n}\n\nexport { Cookie };\n","class Constants {\n  static CCTriggerPageStartTime = \"cc-trigger-page-start-time\";\n  static CCTriggerPageElapsedTime = \"cc-trigger-page-elapsed-time\";\n  static CCTriggerSiteStartTime = \"cc-trigger-site-start-time\";\n  static CCTriggerSiteElapsedTime = \"cc-trigger-site-elapsed-time\";\n  static CCTriggerSitePageViewCount = \"cc-trigger-site-page-count\";\n  static CCTriggerIndividualPageViewCount = \"cc-trigger-individual-page-count\";\n  static SURVEY_IMPRESSION_EVENT = \"onImpression\";\n  static SURVEY_START_EVENT = \"onStart\";\n  static SURVEY_DATA_EVENT = \"onData\";\n  static SURVEY_END_EVENT = \"onEnd\";\n  static SURVEY_CLOSE_EVENT = \"onClose\";\n  static SURVEY_QUESTION_EVENT = \"onQuestion\";\n  static SURVEY_ANSWER_EVENT = \"onAnswer\";\n  static SURVEY_CLICK_EVENT = \"onClick\";\n  static GRANT_TYPE = \"password\";\n  static AUTHORIZATION = \"Authorization\";\n  static AUTHORIZATION_BEARER = \"Bearer\";\n  static SURVEY_CLIENT = \"JS-MicroWeb\";\n}\n\nexport const DEFAULT_PREFILL_QUEUE = {\n  DIRECT: [],\n  BY_TAG: [],\n  BY_NOTE: []\n};\n\nexport { Constants };\n","export function triggerEvent(el: any, eventName: string, data: Object) {\r\n  if (typeof CustomEvent === \"function\") {\r\n    var event = <any>new CustomEvent(eventName, { detail: data });\r\n  } else {\r\n    var event = <any>document.createEvent(\"CustomEvent\");\r\n    event.initCustomEvent(eventName, true, true, data);\r\n  }\r\n\r\n  el.dispatchEvent(event);\r\n}\r\n\r\nexport function dispatchEvent(type, payload) {\r\n  let event = new CustomEvent(type, {\r\n    detail: payload,\r\n    bubbles: true,\r\n    cancelable: false\r\n  });\r\n  let iframe = document.querySelector(\".ccsdk.ifrcntr\");\r\n\r\n  (iframe || document).dispatchEvent(event);\r\n}\r\n","// Production steps of ECMA-262, Edition 6, 22.1.2.1\nif (!(<any>Array).from) {\n  (<any>Array).from = (function () {\n    var toStr = Object.prototype.toString;\n    var isCallable = function (fn) {\n      return typeof fn === 'function' || toStr.call(fn) === '[object Function]';\n    };\n    var toInteger = function (value) {\n      var number = Number(value);\n      if (isNaN(number)) {\n        return 0;\n      }\n      if (number === 0 || !isFinite(number)) {\n        return number;\n      }\n      return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\n    };\n    var maxSafeInteger = Math.pow(2, 53) - 1;\n    var toLength = function (value) {\n      var len = toInteger(value);\n      return Math.min(Math.max(len, 0), maxSafeInteger);\n    };\n\n    // The length property of the from method is 1.\n    return function from(arrayLike /*, mapFn, thisArg */) {\n      // 1. Let C be the this value.\n      var C = this;\n\n      // 2. Let items be ToObject(arrayLike).\n      var items = Object(arrayLike);\n\n      // 3. ReturnIfAbrupt(items).\n      if (arrayLike == null) {\n        throw new TypeError('Array.from requires an array-like object - not null or undefined');\n      }\n\n      // 4. If mapfn is undefined, then let mapping be false.\n      var mapFn = arguments.length > 1 ? arguments[1] : void undefined;\n      var T;\n      if (typeof mapFn !== 'undefined') {\n        // 5. else\n        // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.\n        if (!isCallable(mapFn)) {\n          throw new TypeError('Array.from: when provided, the second argument must be a function');\n        }\n\n        // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.\n        if (arguments.length > 2) {\n          T = arguments[2];\n        }\n      }\n\n      // 10. Let lenValue be Get(items, \"length\").\n      // 11. Let len be ToLength(lenValue).\n      var len = toLength(items.length);\n\n      // 13. If IsConstructor(C) is true, then\n      // 13. a. Let A be the result of calling the [[Construct]] internal method \n      // of C with an argument list containing the single item len.\n      // 14. a. Else, Let A be ArrayCreate(len).\n      var A = isCallable(C) ? Object(new C(len)) : new Array(len);\n\n      // 16. Let k be 0.\n      var k = 0;\n      // 17. Repeat, while k < len… (also steps a - h)\n      var kValue;\n      while (k < len) {\n        kValue = items[k];\n        if (mapFn) {\n          A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);\n        } else {\n          A[k] = kValue;\n        }\n        k += 1;\n      }\n      // 18. Let putStatus be Put(A, \"length\", len, true).\n      A.length = len;\n      // 20. Return A.\n      return A;\n    };\n  }());\n}\n\n// custom event polyfill\n(function () {\n\n  if (typeof (<any>window).CustomEvent === \"function\") return false;\n\n  function CustomEvent(event, params) {\n    params = params || {\n      bubbles: false,\n      cancelable: false,\n      detail: undefined\n    };\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  }\n\n  CustomEvent.prototype = (<any>window).Event.prototype;\n\n  (<any>window).CustomEvent = CustomEvent;\n})();\n\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\nif (!(<any>Array.prototype).find) {\n  Object.defineProperty(Array.prototype, 'find', {\n    value: function (predicate) {\n      // 1. Let O be ? ToObject(this value).\n      if (this == null) {\n        throw new TypeError('\"this\" is null or not defined');\n      }\n\n      var o = Object(this);\n\n      // 2. Let len be ? ToLength(? Get(O, \"length\")).\n      var len = o.length >>> 0;\n\n      // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n      if (typeof predicate !== 'function') {\n        throw new TypeError('predicate must be a function');\n      }\n\n      // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n      var thisArg = arguments[1];\n\n      // 5. Let k be 0.\n      var k = 0;\n\n      // 6. Repeat, while k < len\n      while (k < len) {\n        // a. Let Pk be ! ToString(k).\n        // b. Let kValue be ? Get(O, Pk).\n        // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n        // d. If testResult is true, return kValue.\n        var kValue = o[k];\n        if (predicate.call(thisArg, kValue, k, o)) {\n          return kValue;\n        }\n        // e. Increase k by 1.\n        k++;\n      }\n\n      // 7. Return undefined.\n      return undefined;\n    },\n    configurable: true,\n    writable: true\n  });\n}","import { Cookie } from \"./helpers/Cookie\";\nimport { SurveyManager } from \"./SurveyManager\";\nimport { PrefillsBatchOrSingle } from \"./types\";\nimport { WebSurvey } from \"./WebSurvey\";\nimport { TriggerManager } from \"./TriggerManager\";\nimport { WebSurveyTriggers } from \"./WebSurveyTriggers\";\nimport { DEFAULT_PREFILL_QUEUE } from \"./Constants\";\n\n/**\n * functions that are exposed to SDK User are written here.\n * Entry point for CCSDK.\n */\n// declare var Sentry: any;\n\nlet localCCSDK;\n\n// let instances : any = {};\n\n(window as any).globalSurveyRunning = false;\n(window as any).ccsdkDebug = false;\n(window as any).isMobile = window.innerWidth <= 768 ? true : false;\n\nexport function setUpEnv() {\n  localCCSDK = {\n    init: init,\n    destroy: destroy,\n    trigger: trigger,\n    hide: hide,\n    show: show,\n    on: on,\n    prefill: prefill,\n    prefillByTag: prefillByTag,\n    prefillByNote: prefillByNote\n  };\n\n  if (typeof (window as any).CCSDK !== \"undefined\") {\n    var queue = (window as any).CCSDK.q;\n    (window as any).CCSDK = function () {\n      if (arguments && arguments.length == 0) {\n        var time = new Date();\n      } else {\n        (window as any).ccsdkDebug ? console.log(arguments) : \"\";\n        var args = (Array as any).from(arguments);\n        //Call this functions as ccsdk('functionName', ['argument1', 'argument2']);\n        var functionName = args.splice(0, 1)[0];\n        (window as any).ccsdkDebug ? console.log(functionName) : \"\";\n        return localCCSDK[functionName].apply(this, args);\n      }\n    };\n    if (queue) {\n      for (var q of queue) {\n        var args = (Array as any).from(q);\n        var functionName = args.splice(0, 1)[0];\n        localCCSDK[functionName].apply(this, args);\n      }\n    }\n    let eventCCReady: Event = document.createEvent(\"Event\");\n    eventCCReady.initEvent(\"ccready\", true, true);\n    document.dispatchEvent(eventCCReady);\n  }\n}\n\nsetUpEnv();\n\nexport function init(surveyToken: any) {\n  let isV2 = true;\n  //config options can be set in arguments[1]\n  //available config options : themeColor\n  surveyToken = decodeURIComponent(surveyToken).trim();\n  let config = typeof arguments[1] === \"object\" ? arguments[1] : {};\n  //create survey instance\n  if (\n    typeof Cookie.get(surveyToken + \"-finish\") !== \"undefined\" &&\n    Cookie.get(surveyToken + \"-finish\")\n  ) {\n    return;\n  }\n  if (\n    typeof Cookie.get(surveyToken + \"-coolDown\") !== \"undefined\" &&\n    Cookie.get(surveyToken + \"-coolDown\")\n  ) {\n    return;\n  }\n\n  if (typeof config.isActive !== \"undefined\" && config.isActive) {\n    if (!SurveyManager.surveyInstances[surveyToken]) {\n      // Add survey to instances list\n      SurveyManager.addSurvey(surveyToken, new WebSurvey(surveyToken, config));\n    }\n\n    if (!TriggerManager.triggerInstances[surveyToken]) {\n      // add trigger to instances list\n      TriggerManager.addSurvey(surveyToken, new WebSurveyTriggers(config));\n    }\n\n    trackEvent(surveyToken);\n\n    if (!TriggerManager.enqueueSurvey) {\n      setUpCallBack();\n    }\n\n    if (SurveyManager.prefillQueue[surveyToken]) {\n      let object = SurveyManager.prefillQueue[surveyToken];\n      SurveyManager.surveyInstances[surveyToken].tracking.trackEvent(\n        \"Init MicroSurvey\",\n        {\n          token: surveyToken,\n          data: {\n            name: \"Prefill lazily\",\n            action: surveyToken\n          }\n        },\n        null,\n        null\n      );\n\n      Object.keys(DEFAULT_PREFILL_QUEUE).forEach((x) => {\n        if (object[x] && object[x].length > 0) {\n          SurveyManager.surveyInstances[surveyToken].prefill(object, x);\n        }\n      });\n\n      delete SurveyManager.prefillQueue[surveyToken];\n      // if (object.directPrefills) {\n      //   object.directPrefills.forEach(x => {\n\n      //   });\n      //   delete object.directPrefills;\n      // } else if (object.byTagPrefills) {\n      //   object.byTagPrefills.forEach(x => {\n      //     SurveyManager.surveyInstances[surveyToken].prefill(x, 'BY_TAG');\n      //   });\n      //   delete object.byTagPrefills;\n      // } else if (object.byNotePrefills) {\n      //   object.byTagPrefills.forEach(x => {\n      //     SurveyManager.surveyInstances[surveyToken].prefill(x, 'BY_NOTE');\n      //   });\n      //   delete object.byNotePrefills;\n      // }\n    }\n    return SurveyManager.surveyInstances[surveyToken];\n  } else {\n    //do nothing\n  }\n}\n\nexport function setUpCallBack() {\n  TriggerManager.enqueueSurvey = (token) => {\n    SurveyManager.addSurveyToQueue(token);\n  };\n}\n\nexport function trackEvent(surveyToken: any) {\n  SurveyManager.surveyInstances[surveyToken].tracking.trackEvent(\n    \"Init MicroSurvey\",\n    {\n      token: surveyToken,\n      data: {\n        name: (<any>window).isMobile ? \"Mobile Mode\" : \"Desktop Mode\",\n        action: surveyToken\n      }\n    },\n    null,\n    null\n  );\n}\n\nexport function destroy(surveyToken: string) {\n  //remove from trigger manager, delete instance.\n  SurveyManager.destroy(surveyToken);\n  TriggerManager;\n}\n//\nexport function trigger(surveyToken: string, type: string, target: string) {\n  (window as any).ccsdkDebug ? console.log(SurveyManager.surveyInstances) : \"\";\n\n  if (typeof SurveyManager.surveyInstances[surveyToken] != \"undefined\") {\n    SurveyManager.surveyInstances[surveyToken].tracking.trackEvent(\n      \"Trigger Type\",\n      {\n        token: surveyToken,\n        data: {\n          name: type,\n          action: surveyToken\n        }\n      },\n      null,\n      null\n    );\n    SurveyManager.surveyInstances[surveyToken].trigger(type, target);\n  }\n  //tell trigger manager to register trigger.\n}\n\nexport function on(surveyToken: string, type: string, callback: any) {\n  if (typeof SurveyManager.surveyInstances[surveyToken] != \"undefined\") {\n    SurveyManager.surveyInstances[surveyToken].tracking.trackEvent(\n      \"Event Listeners\",\n      {\n        token: surveyToken,\n        data: {\n          name: type,\n          action: surveyToken\n        }\n      },\n      null,\n      null\n    );\n    SurveyManager.surveyInstances[surveyToken].on(type, callback);\n  }\n}\n\nfunction savePrefillAsObject(surveyToken, restArgs, type) {\n  let prefill;\n  if (typeof restArgs[0] === \"string\") {\n    prefill = { [restArgs[0]]: restArgs[1] };\n  } else {\n    prefill = restArgs[0];\n  }\n  if (\n    typeof SurveyManager.surveyInstances[surveyToken] != \"undefined\" &&\n    restArgs[0]\n  ) {\n    SurveyManager.surveyInstances[surveyToken].prefill(prefill, type);\n  } else {\n    if (!SurveyManager.prefillQueue[surveyToken]) {\n      SurveyManager.prefillQueue[surveyToken] = {\n        DIRECT: [],\n        BY_TAG: [],\n        BY_NOTE: []\n      };\n    }\n    SurveyManager.prefillQueue[surveyToken][type].push(prefill);\n  }\n}\n\nexport function prefill(\n  surveyToken: string,\n  ...restArgs: PrefillsBatchOrSingle\n) {\n  savePrefillAsObject(surveyToken, restArgs, \"DIRECT\");\n}\n\nexport function prefillByTag(\n  surveyToken: string,\n  ...restArgs: PrefillsBatchOrSingle\n) {\n  savePrefillAsObject(surveyToken, restArgs, \"BY_TAG\");\n}\n\nexport function prefillByNote(\n  surveyToken: string,\n  ...restArgs: PrefillsBatchOrSingle\n) {\n  savePrefillAsObject(surveyToken, restArgs, \"BY_NOTE\");\n}\n\nexport function show(surveyToken: string) {\n  if (typeof SurveyManager.surveyInstances[surveyToken] != \"undefined\") {\n    SurveyManager.surveyInstances[surveyToken].show();\n  }\n}\n\nexport function hide(surveyToken: string, callback) {\n  if (typeof SurveyManager.surveyInstances[surveyToken] != \"undefined\") {\n    SurveyManager.surveyInstances[surveyToken].hide(callback);\n  }\n}\n","//Survey Manager manages and queues survey.\n\nimport { TriggerManager } from \"./TriggerManager\";\nimport { WebSurvey } from \"./WebSurvey\";\nimport { PrefillType } from \"./types\";\nimport { Cookie } from \"./helpers/Cookie\";\n\nclass SurveyManager {\n  static surveyQueue: any = [];\n  static processQueueInterval: any = null;\n  static prefillQueue: {\n    [surveyToken: string]: {\n      [k in PrefillType]: any;\n    };\n  } = {};\n  static surveyInstances: {\n    [key: string]: WebSurvey;\n  } = {};\n\n  static initializeSurvey(surveyId: string) {\n    //check if survey ran?\n    //do survey initialization.\n    if (\n      !SurveyManager.surveyInstances ||\n      !SurveyManager.surveyInstances[surveyId]\n    ) {\n      (<any>window).ccsdkDebug\n        ? console.info(\n            \"Microsurvey not properly set up. Contact Support.\",\n            { tokenId: surveyId },\n            {\n              page: window.location.href\n            }\n          )\n        : \"\";\n      return;\n    }\n\n    SurveyManager.surveyInstances[surveyId].setupSurvey();\n  }\n\n  static addSurvey(surveyId, surveyInstance) {\n    SurveyManager.surveyInstances[surveyId] = surveyInstance;\n\n    if (SurveyManager.processQueueInterval == null) {\n      SurveyManager.processQueueInterval = setInterval(\n        SurveyManager.processQueueIntervalCB,\n        100\n      );\n    }\n  }\n\n  static addSurveyToQueue(token) {\n    (window as any).ccsdkDebug\n      ? console.log(\"Adding survey ID : \" + token)\n      : \"\";\n    if (SurveyManager.surveyQueue.indexOf(token) === -1) {\n      if (\n        typeof Cookie.get(token + \"-finish\") !== \"undefined\" &&\n        Cookie.get(token + \"-finish\")\n      ) {\n        return;\n      }\n      if (\n        typeof Cookie.get(token + \"-coolDown\") !== \"undefined\" &&\n        Cookie.get(token + \"-coolDown\")\n      ) {\n        return;\n      }\n      SurveyManager.surveyQueue.push(token);\n    }\n  }\n\n  static processQueueIntervalCB() {\n    if ((window as any).globalSurveyRunning == true) {\n      return;\n    } else {\n      let surveyId = SurveyManager.surveyQueue.pop();\n      (window as any).ccsdkDebug\n        ? console.log(\"Processing survey ID \" + surveyId)\n        : \"\";\n      if (surveyId) {\n        SurveyManager.initializeSurvey(surveyId);\n      }\n    }\n  }\n\n  public static destroy(token) {\n    setTimeout(() => {\n      delete SurveyManager.surveyInstances[token];\n    }, 250);\n  }\n\n  static destroyIntervals() {\n    clearInterval(SurveyManager.processQueueInterval);\n    SurveyManager.processQueueInterval = null;\n  }\n\n  public static setSurveyRunning() {\n    (window as any).globalSurveyRunning = true;\n    (window as any).globalSurveyStartTime = new Date();\n  }\n\n  public static unsetSurveyRunning() {\n    (window as any).globalSurveyRunning = false;\n  }\n}\n\nexport { SurveyManager };\n","import { WebSurveyHandler } from \"./WebSurveyHandler\";\r\nimport { WebSurveyTriggers } from \"./WebSurveyTriggers\";\r\nimport { triggerEvent, dispatchEvent } from \"./utils\";\r\nimport { Constants } from \"./Constants\";\r\n\r\nexport class WebSurvey {\r\n  surveyToken: string;\r\n  config;\r\n  handler: WebSurveyHandler;\r\n\r\n  triggers: WebSurveyTriggers;\r\n  tracking = {\r\n    trackEvent: this.trackEvent\r\n  };\r\n  util: any;\r\n\r\n  constructor(token, config) {\r\n    this.surveyToken = token;\r\n    this.config = config;\r\n    this.handler = new WebSurveyHandler(this.surveyToken, config);\r\n\r\n    this.init();\r\n  }\r\n\r\n  setupSurvey() {\r\n    if (\r\n      !this.handler.getCoolDown(this.surveyToken) &&\r\n      !this.handler.getTokenAnswered(this.surveyToken) &&\r\n      !this.handler.container.browserNotSuitable\r\n    ) {\r\n      this.show();\r\n      this.handler.setCoolDownPeriod(this.config, this.surveyToken);\r\n    }\r\n  }\r\n\r\n  init() {\r\n    setTimeout(() => {\r\n      triggerEvent(document, this.surveyToken + \"-ready\", { survey: this });\r\n    }, 100);\r\n  }\r\n\r\n  setTriggers() {}\r\n\r\n  public trigger(...args) {}\r\n\r\n  public on(type, callback) {\r\n    document.addEventListener(type + \"-\" + this.surveyToken, function (e: any) {\r\n      callback(e.detail);\r\n    });\r\n  }\r\n\r\n  public prefill(object, type) {\r\n    this.handler.prefill(object, type);\r\n  }\r\n\r\n  show() {\r\n    this.handler.show();\r\n    dispatchEvent(\r\n      `${Constants.SURVEY_IMPRESSION_EVENT}-${this.surveyToken}`,\r\n      this.surveyToken\r\n    );\r\n  }\r\n\r\n  trackEvent(...args) {}\r\n\r\n  hide(cb) {\r\n    this.handler.hide();\r\n    if (cb) {\r\n      cb();\r\n    }\r\n  }\r\n}\r\n","import { WebSurveyContainer } from \"./WebSurveyContainer\";\r\nimport { Cookie } from \"./helpers/Cookie\";\r\nimport { dispatchEvent } from \"./utils\";\r\nimport { Constants } from \"./Constants\";\r\n\r\nexport class WebSurveyHandler {\r\n  // url = \"https://cx.getcloudcherry.com/perf-s1/#/login?token=\";\r\n  url = \"https://cx.cloudcherry.com/ns/#/login?token=\";\r\n  // url = \"http://localhost:8100/#/login?token=\";\r\n  token = \"mr-100550\";\r\n  container: WebSurveyContainer;\r\n  _hideCloseButton: boolean | null = null;\r\n  public set showCloseButton(value: boolean) {\r\n    this._hideCloseButton = value;\r\n    if (this.container) {\r\n      this.container.hideCloseButton = value;\r\n    }\r\n  }\r\n\r\n  config;\r\n\r\n  constructor(token, config) {\r\n    this.token = token;\r\n    this.config = config;\r\n    this.config.token = token;\r\n\r\n    this.container = new WebSurveyContainer(this.config);\r\n    if (this._hideCloseButton !== null) {\r\n      this.container.hideCloseButton = this._hideCloseButton;\r\n    }\r\n  }\r\n\r\n  show(token = this.token) {\r\n    this.container.closeCallback = (event: Event) => {\r\n      dispatchEvent(\r\n        `${Constants.SURVEY_CLOSE_EVENT}-${this.token}`,\r\n        this.token\r\n      );\r\n    };\r\n\r\n    this.container.open();\r\n    this.container.setSource(this.getUrl(token || this.token));\r\n    // this.container.setConfig(this.config);\r\n  }\r\n\r\n  hide() {\r\n    this.container.close();\r\n  }\r\n\r\n  getUrl(token: string): string {\r\n    return `${this.url}${token}&mode=microsurvey`;\r\n  }\r\n\r\n  setCoolDownPeriod(campaign, surveyToken) {\r\n    if (campaign && campaign.coolDownPeriod && campaign.coolDownPeriod != 0) {\r\n      Cookie.set(\r\n        surveyToken + \"-coolDown\",\r\n        \"true\",\r\n        campaign.coolDownPeriod / 86400,\r\n        \"/\"\r\n      );\r\n    } else {\r\n      Cookie.set(surveyToken + \"-coolDown\", \"true\", 1, \"/\");\r\n    }\r\n  }\r\n\r\n  getCoolDown(surveyToken) {\r\n    return Cookie.get(surveyToken + \"-coolDown\");\r\n  }\r\n\r\n  getTokenAnswered(surveyToken) {\r\n    return Cookie.get(surveyToken);\r\n  }\r\n\r\n  public prefill(object, type) {\r\n    this.container.prefill(object, type);\r\n  }\r\n}\r\n","import \"./global.scss\";\r\nimport { dispatchEvent } from \"./utils\";\r\nimport { Constants } from \"./Constants\";\r\nimport { Cookie } from \"./helpers/Cookie\";\r\n\r\nexport class WebSurveyContainer {\r\n  public iframe: HTMLIFrameElement;\r\n  public iframeContainer: HTMLDivElement;\r\n  public hideCloseButton = false;\r\n  public closeCallback: Function | null = null;\r\n  urlSource;\r\n  _iframeOpened: boolean | null = null;\r\n  restrictedOrigin = \"*\";\r\n  config;\r\n  public browserNotSuitable = false;\r\n  readyForPrefills = false;\r\n  _prefills = [];\r\n  pageLoad: boolean;\r\n  closeButton: HTMLButtonElement;\r\n\r\n  constructor(config) {\r\n    this.config = config;\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    [this.iframe, this.iframeContainer] = this.getSurvey();\r\n    this.listenForMessages();\r\n  }\r\n\r\n  getSurvey(): [HTMLIFrameElement, HTMLDivElement] {\r\n    let iframe = this.getIframe();\r\n    let iframeContainer = this.getIframeContainer();\r\n\r\n    iframeContainer.appendChild(iframe);\r\n\r\n    iframeContainer.onwheel = (ev) => {\r\n      ev.stopPropagation();\r\n    };\r\n\r\n    window.onresize = (ev) => {\r\n      if (!this.closeButton) {\r\n        return;\r\n      }\r\n      if (window.innerWidth > 768) {\r\n        this.closeButton.style.bottom = `${\r\n          this.iframeContainer.clientHeight - 14\r\n        }px`;\r\n      } else {\r\n        this.closeButton.style.bottom = `${\r\n          this.iframeContainer.clientHeight - 48\r\n        }px`;\r\n      }\r\n    };\r\n    return [iframe, iframeContainer];\r\n  }\r\n\r\n  getIframeContainer(): HTMLDivElement {\r\n    let iframeContainer = document.createElement(\"div\");\r\n    iframeContainer.classList.add(\"ccsdk\");\r\n    iframeContainer.classList.add(\"ifr-cntr\");\r\n    iframeContainer.style.transform = \"translateY(100vh)\";\r\n    return iframeContainer;\r\n  }\r\n\r\n  getIframe(): HTMLIFrameElement {\r\n    let iframe = document.createElement(\"iframe\");\r\n    iframe.classList.add(\"ifr\");\r\n    iframe.style.border = \"0\";\r\n    iframe.style.borderColor = this.config.brandColor;\r\n    return iframe;\r\n  }\r\n\r\n  getCloseButton(iframeHeight: number) {\r\n    let button = document.createElement(\"button\");\r\n    button.style.backgroundColor = this.config.brandColor;\r\n    button.innerHTML =\r\n      '<img src=\"https://cxnext.blob.core.windows.net/venki/times.png\" class=\"close-icon\">';\r\n\r\n    if (window.innerWidth > 768) {\r\n      button.style.bottom = `${iframeHeight - 14}px`;\r\n    } else {\r\n      button.style.bottom = `${iframeHeight - 48}px`;\r\n    }\r\n\r\n    button.addEventListener(\"click\", (event) => {\r\n      if (this.closeCallback) {\r\n        this.closeCallback(event);\r\n      }\r\n      button.style.visibility = \"hidden\";\r\n      this.close();\r\n    });\r\n\r\n    return button;\r\n  }\r\n\r\n  public close() {\r\n    if (!this.iframeContainer) {\r\n      return;\r\n    }\r\n\r\n    (<any>window).globalSurveyRunning = false;\r\n    this._iframeOpened = false;\r\n    this.iframeContainer.style.transform = \"translateY(100vh)\";\r\n    setTimeout(() => {\r\n      this.destroy();\r\n    }, 250);\r\n  }\r\n\r\n  destroy() {\r\n    try {\r\n      this.iframeContainer.removeChild(this.iframe);\r\n      this.iframe = null;\r\n      document.body.removeChild(this.iframeContainer);\r\n      this.iframeContainer = null;\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n    this.pageLoad = false;\r\n  }\r\n\r\n  public setSource(url: string) {\r\n    if (!this.iframe) {\r\n      return;\r\n    }\r\n\r\n    this.iframe.src = url;\r\n    this.urlSource = url;\r\n    let that = this;\r\n\r\n    this.iframe.onload = () => {\r\n      console.info(\"Iframe loaded. Ready for showing to user.\");\r\n      this.pageLoad = true;\r\n    };\r\n\r\n    function websurveyConfigCallBack(event) {\r\n      if (event.data) {\r\n        try {\r\n          let message = JSON.parse(event.data);\r\n          if (\r\n            message &&\r\n            message.type === \"GET_CONFIG\" &&\r\n            message.token === that.config.token\r\n          ) {\r\n            that.config.pagedLayout = false;\r\n            that.setConfig(that.config);\r\n            window.removeEventListener(\"message\", websurveyConfigCallBack);\r\n          }\r\n        } catch (err) {\r\n          console.log(err);\r\n        }\r\n      }\r\n    }\r\n\r\n    window.addEventListener(\"message\", websurveyConfigCallBack);\r\n  }\r\n\r\n  public setConfig(config) {\r\n    let message = JSON.stringify({\r\n      config,\r\n      options: {\r\n        screenWidth: window.innerWidth,\r\n        screenHeight: window.innerHeight\r\n      },\r\n      mode: \"MICROSURVEY\"\r\n    });\r\n\r\n    this.iframe.contentWindow.postMessage(message, this.restrictedOrigin);\r\n  }\r\n\r\n  open() {\r\n    if (this.browserNotSuitable) {\r\n      console.info(\r\n        \"Cookie and Storage not accessible for survey. Survey will not show up.\"\r\n      );\r\n      return;\r\n    }\r\n    (<any>window).globalSurveyRunning = true;\r\n    if (!this.iframeContainer || !this.iframe) {\r\n      this.init();\r\n      this.attachIframe();\r\n      this.setConfig(this.urlSource);\r\n    } else {\r\n      this.attachIframe();\r\n    }\r\n  }\r\n\r\n  attachIframe() {\r\n    document.body.appendChild(this.iframeContainer);\r\n    let that = this;\r\n    function pollForPageLoad() {\r\n      if (that.pageLoad) {\r\n        that.iframeContainer.style.transform = \"none\";\r\n        that.iframeContainer.style.transform = \"unset\";\r\n      } else {\r\n        setTimeout(() => {\r\n          pollForPageLoad();\r\n        }, 150);\r\n      }\r\n    }\r\n\r\n    // poll for page load\r\n    pollForPageLoad();\r\n\r\n    this._iframeOpened = true;\r\n    if (!this.hideCloseButton) {\r\n      let scaleFactor = 1; // 0.66;\r\n      this.closeButton = this.getCloseButton(\r\n        this.iframe.clientHeight * scaleFactor\r\n      );\r\n      this.closeButton.classList.add(\"close-btn\");\r\n      this.iframeContainer.appendChild(this.closeButton);\r\n    }\r\n  }\r\n\r\n  listenForMessages() {\r\n    var that = this;\r\n    window.addEventListener(\"message\", (ev) => {\r\n      if (ev.data) {\r\n        try {\r\n          let message = JSON.parse(ev.data);\r\n          if (message.type === \"READY_FOR_PREFILLS\") {\r\n            that.readyForPrefills = true;\r\n            if (that._prefills.length > 0) {\r\n              that._prefills.forEach((x: [any, any]) => {\r\n                that.postPrefillsToSurvey(x[0], x[1]);\r\n              });\r\n            }\r\n          } else if (message.type === \"STORAGE_EXCEPTION\") {\r\n            that._iframeOpened = false;\r\n            that.close();\r\n            that.browserNotSuitable = true;\r\n            console.info(\"Storage exception within iframe\");\r\n          } else if (message.type === \"REDIRECT_TO_FALLBACK\") {\r\n            that.setConfig(that.config);\r\n            that.readyForPrefills = false;\r\n          } else if (message.type === \"EVENT_FROM_SURVEY\") {\r\n            let eventTypeMap = {\r\n              START: \"onStart\",\r\n              ANSWERED: \"onAnswer\",\r\n              DATA: \"onData\",\r\n              END: \"onEnd\",\r\n              QUESTION: \"onQuestion\"\r\n            };\r\n\r\n            if (message.data.eventType === \"END\") {\r\n              if (\r\n                message.data.response !== null &&\r\n                message.data.response.token === that.config.token\r\n              ) {\r\n                setTimeout(() => {\r\n                  that.close();\r\n                  // websurvey sets the cookie in the iframe and not in the parent page\r\n                  //set done cookie for 30 days.\r\n                  Cookie.set(that.config.token + \"-finish\", \"true\", 30, \"/\");\r\n                  dispatchEvent(\r\n                    `${Constants.SURVEY_CLOSE_EVENT}-${that.config.token}`,\r\n                    that.config.token\r\n                  );\r\n                }, 3000);\r\n\r\n                // redirect url will be opened in new window\r\n                window.open(message.data.response.url, \"_blank\");\r\n              }\r\n            }\r\n            dispatchEvent(\r\n              `${eventTypeMap[message.data.eventType]}-${that.config.token}`,\r\n              message.data.response\r\n            );\r\n          }\r\n        } catch (err) {}\r\n      }\r\n    });\r\n  }\r\n\r\n  public prefill(object, type) {\r\n    if (this.readyForPrefills && object) {\r\n      this.postPrefillsToSurvey(object, type);\r\n    } else {\r\n      this._prefills.push([object, type]);\r\n    }\r\n  }\r\n\r\n  postPrefillsToSurvey(prefills, type) {\r\n    let message = JSON.stringify({\r\n      prefills: prefills,\r\n      prefillType: type,\r\n      type: \"PREFILLS_FROM_HOST\"\r\n    });\r\n\r\n    this.iframe.contentWindow.postMessage(message, this.restrictedOrigin);\r\n  }\r\n}\r\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/rtl-css-loader/index.js!../node_modules/sass-loader/lib/loader.js!./global.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/rtl-css-loader/index.js!../node_modules/sass-loader/lib/loader.js!./global.scss\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/rtl-css-loader/index.js!../node_modules/sass-loader/lib/loader.js!./global.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../node_modules/rtl-css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, typeof document !== 'undefined' && document.getElementsByTagName('html')[0].getAttribute('dir') === 'rtl' ? \".ccsdk.ifr-cntr{z-index:1000;transition:transform .35s ease-in-out;width:376px;min-height:250px;max-height:644px;box-shadow:0 5px 40px rgba(0,0,0,.16);opacity:1;height:calc(100% - 120px);position:fixed;left:24px;bottom:24px}.ccsdk .ifr{height:100%;width:100%;transform-origin:0% 100%;border:1px solid}.ccsdk .close-btn{left:32px;position:fixed;border-radius:100%;width:24px;height:24px;padding:2px;border:none;visibility:visible;cursor:pointer}.ccsdk .close-btn .close-icon{width:100%;height:100%}.ccsdk .close-btn.hidden{visibility:hidden}@media screen and (max-width:768px){.ccsdk .ifr,.ccsdk.ifr-cntr{height:100%;width:100%}.ccsdk.ifr-cntr{min-height:100%;max-height:100%;left:0;bottom:0}.ccsdk .close-btn{left:8px;height:40px;width:40px}}\" : \".ccsdk.ifr-cntr{z-index:1000;transition:transform .35s ease-in-out;width:376px;min-height:250px;max-height:644px;box-shadow:0 5px 40px rgba(0,0,0,.16);opacity:1;height:calc(100% - 120px);position:fixed;right:24px;bottom:24px}.ccsdk .ifr{height:100%;width:100%;transform-origin:100% 100%;border:1px solid}.ccsdk .close-btn{right:32px;position:fixed;border-radius:100%;width:24px;height:24px;padding:2px;border:none;visibility:visible;cursor:pointer}.ccsdk .close-btn .close-icon{width:100%;height:100%}.ccsdk .close-btn.hidden{visibility:hidden}@media screen and (max-width:768px){.ccsdk .ifr,.ccsdk.ifr-cntr{height:100%;width:100%}.ccsdk.ifr-cntr{min-height:100%;max-height:100%;right:0;bottom:0}.ccsdk .close-btn{right:8px;height:40px;width:40px}}\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function() {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\tvar result = [];\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar item = this[i];\n\t\t\tif(item[2]) {\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\n\t\t\t} else {\n\t\t\t\tresult.push(item[1]);\n\t\t\t}\n\t\t}\n\t\treturn result.join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t}\n\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","//Manages trigger.\nimport { Cookie } from \"./helpers/Cookie\";\nimport { Constants } from \"./Constants\";\nimport { WebSurveyTriggers } from \"./WebSurveyTriggers\";\n\n//collect initial data\n//if on site time is null, add on site time\nif (Cookie.get(Constants.CCTriggerSiteStartTime) == null) {\n  Cookie.set(Constants.CCTriggerSiteStartTime, new Date(), undefined, undefined);\n}\n//always add on page Time\nCookie.set(Constants.CCTriggerPageStartTime, new Date(), undefined, undefined);\n\nlet sitePageViewCount = Cookie.get(Constants.CCTriggerSitePageViewCount);\nif (sitePageViewCount == null) {\n  Cookie.set(Constants.CCTriggerSitePageViewCount, 1, undefined, undefined);\n} else {\n  sitePageViewCount = (parseInt(sitePageViewCount) + 1).toString();\n  Cookie.set(Constants.CCTriggerSitePageViewCount, sitePageViewCount, undefined, undefined);\n}\n\nlet pathname = window.location.pathname;\nif (pathname.match(/\\./)) {\n  pathname = pathname.substring(0, pathname.lastIndexOf('/'));\n}\nlet individualPageViewCount = Cookie.get(Constants.CCTriggerIndividualPageViewCount);\nif (individualPageViewCount == null) {\n  Cookie.set(Constants.CCTriggerIndividualPageViewCount + pathname, 1, undefined, undefined);\n} else {\n  individualPageViewCount = (parseInt(individualPageViewCount) + 1).toString();\n  Cookie.set(Constants.CCTriggerIndividualPageViewCount + pathname, individualPageViewCount, undefined, undefined);\n}\n\n(window as any).click = 0;\n\nwindow.onscroll = function (e) {\n  // called when the window is scrolled.  \n  let doc = document.documentElement;\n  let left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n  let top = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n  (window as any).ccsdkTopOffset = top;\n  TriggerManager.processScrollTriggers(top);\n}\n\ndocument.onclick = function (e) {\n  (window as any).click++;\n}\n\n//TriggerManager adds to survey Queue\nclass TriggerManager {\n\n  static triggerInterval: any = null;\n  static triggerInstances: {\n    [key: string]: WebSurveyTriggers\n  } = {};\n\n  static enqueueSurvey: Function;\n\n  constructor() {\n\n  }\n\n  static addSurvey(surveyId: any, trigger: WebSurveyTriggers) {\n    TriggerManager.triggerInstances[surveyId] = trigger;\n\n    trigger.evaluateCallBack = () => {\n      TriggerManager.enqueueSurvey && TriggerManager.enqueueSurvey(surveyId);\n    }\n\n    if (Object.keys(TriggerManager.triggerInstances).length >= 1) {\n      (window as any).ccsdkDebug ? console.log(TriggerManager.triggerInterval) : '';\n      if (TriggerManager.triggerInterval == null) {\n        (window as any).ccsdkDebug ? console.log(\"TriggerHandler : Setting up Interval Trigger Handlers.\") : '';\n        TriggerManager.triggerInterval = setInterval(TriggerManager.processIntervalTriggers, 1000);\n      }\n    }\n  }\n\n  static processIntervalTriggers() {\n    //if some survey is already running skip processing surveys for now?or queue it?.\n    let pathname = window.location.pathname;\n    if (pathname.match(/\\./)) {\n      pathname = pathname.substring(0, pathname.lastIndexOf('/'));\n    }\n    Cookie.set(Constants.CCTriggerPageElapsedTime + pathname, new Date(), undefined, undefined);\n    Cookie.set(Constants.CCTriggerSiteElapsedTime, new Date(), undefined, undefined);\n\n    for (let trigger in TriggerManager.triggerInstances) {\n      TriggerManager.triggerInstances[trigger].evaluateTriggers();\n      // TriggerManager.triggerInstances[trigger].processConditionalTriggers();\n    }\n  }\n\n\n  static processScrollTriggers(scrollY) {\n    for (let trigger in TriggerManager.triggerInstances) {\n      //process all scroll triggers.\n      TriggerManager.triggerInstances[trigger].evaluateTriggers();\n    }\n  }\n};\n\n\n\nexport { TriggerManager };","import { CCSDKConfig } from \"./interfaces/CCSDKConfig\";\r\nimport { Cookie } from \"./helpers/Cookie\";\r\nimport { Constants } from \"./Constants\";\r\nimport { TriggerUtils } from \"./helpers/TriggerUtils\";\r\n\r\nexport const SUPPORTED_TRIGGERS = [\r\n  \"click\",\r\n  \"waitSeconds\",\r\n  \"scrollPercent\",\r\n  \"grepURL\",\r\n  \"grepInvertURL\"\r\n];\r\n\r\nexport class WebSurveyTriggers {\r\n  config: CCSDKConfig;\r\n  evaluateCallBack: Function;\r\n  scrollTriggerPoint = 0;\r\n  constructor(config: CCSDKConfig) {\r\n    this.config = config;\r\n    if (this.config[\"scrollPercent\"]) {\r\n      this.scrollTriggerPoint =\r\n        (this.config[\"scrollPercent\"] *\r\n          (document.documentElement.scrollHeight ||\r\n            document.body.scrollHeight)) /\r\n        100;\r\n    }\r\n  }\r\n\r\n  evaluateTriggers() {\r\n    let showSurvey = true;\r\n\r\n    SUPPORTED_TRIGGERS.forEach((key) => {\r\n      if (this.config[key]) {\r\n        switch (key) {\r\n          case \"click\":\r\n            showSurvey =\r\n              showSurvey && (window as any).click >= this.config.click;\r\n            break;\r\n          case \"waitSeconds\":\r\n            // time spent on page\r\n            let pageStartTime = new Date(\r\n              Cookie.get(Constants.CCTriggerPageStartTime)\r\n            ).getTime();\r\n            let pathname = window.location.pathname;\r\n            if (pathname.match(/\\./)) {\r\n              pathname = pathname.substring(0, pathname.lastIndexOf(\"/\"));\r\n            }\r\n            let pageTime = new Date(\r\n              Cookie.get(Constants.CCTriggerPageElapsedTime + pathname)\r\n            ).getTime();\r\n            showSurvey =\r\n              showSurvey &&\r\n              TriggerUtils.checkTimeCondition(\r\n                pageTime,\r\n                pageStartTime,\r\n                this.config[key]\r\n              );\r\n            (window as any).ccsdkDebug\r\n              ? console.log(\"waitSeconds enabled\", showSurvey)\r\n              : \"\";\r\n            break;\r\n          case \"scrollPercent\":\r\n            //fill it with current scroll position\r\n            showSurvey =\r\n              showSurvey &&\r\n              TriggerUtils.checkScroll(\r\n                (window as any).ccsdkTopOffset,\r\n                this.scrollTriggerPoint\r\n              );\r\n            (window as any).ccsdkDebug\r\n              ? console.log(\"scrollPercent enabled\", showSurvey)\r\n              : \"\";\r\n\r\n            break;\r\n          case \"grepURL\":\r\n            showSurvey =\r\n              showSurvey && TriggerUtils.checkInUrl(this.config[key]);\r\n            (window as any).ccsdkDebug\r\n              ? console.log(\"grepURL enabled\", showSurvey)\r\n              : \"\";\r\n            break;\r\n          case \"grepInvertURL\":\r\n            showSurvey =\r\n              showSurvey && !TriggerUtils.checkInUrl(this.config[key]);\r\n            (window as any).ccsdkDebug\r\n              ? console.log(\"grepInvertURL enabled\", showSurvey)\r\n              : \"\";\r\n            break;\r\n        }\r\n      }\r\n    });\r\n\r\n    if (showSurvey) {\r\n      this.evaluateCallBack && this.evaluateCallBack();\r\n    }\r\n  }\r\n}\r\n","class TriggerUtils {\n  public static checkInUrl(inUrl: RegExp | string) {\n    return (\n      window.location.href.match(inUrl) != null &&\n      window.location.href.match(inUrl).length > 0\n    );\n  }\n\n  public static checkTimeCondition(\n    pageTime: number,\n    pageStartTime: number,\n    minPageTime: number\n  ) {\n    return Math.round((pageTime - pageStartTime) / 1000) > minPageTime;\n  }\n\n  public static checkScroll(scrollNow: number, minScrollPixels: number) {\n    return scrollNow > minScrollPixels;\n  }\n\n  public static checkPageCount(pageCount: number, minPageCount: number) {\n    return pageCount >= minPageCount;\n  }\n}\n\nexport { TriggerUtils };\n"],"sourceRoot":""}