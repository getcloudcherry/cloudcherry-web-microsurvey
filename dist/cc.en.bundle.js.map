{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/helpers/Cookie.ts","webpack:///./src/Constants.ts","webpack:///./src/utils.ts","webpack:///./src/polyfills/ccsdk.polyfill.ts","webpack:///./src/CCSDKEntry.ts","webpack:///./src/SurveyManager.ts","webpack:///./src/WebSurvey.ts","webpack:///./src/WebSurveyHandler.ts","webpack:///./src/WebSurveyContainer.ts","webpack:///./src/global.scss?46dc","webpack:///./src/global.scss","webpack:///./node_modules/rtl-css-loader/lib/css-base.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./src/TriggerManager.ts","webpack:///./src/WebSurveyTriggers.ts","webpack:///./src/helpers/TriggerUtils.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Cookie","set","days","path","date","Date","setTime","getTime","expires","toUTCString","dir","document","cookie","nameEQ","ca","split","length","charAt","substring","indexOf","delete","undefined","getParameterByName","url","window","location","href","replace","results","RegExp","exec","decodeURIComponent","Constants","CCTriggerPageStartTime","CCTriggerPageElapsedTime","CCTriggerSiteStartTime","CCTriggerSiteElapsedTime","CCTriggerSitePageViewCount","CCTriggerIndividualPageViewCount","SURVEY_IMPRESSION_EVENT","SURVEY_START_EVENT","SURVEY_DATA_EVENT","SURVEY_END_EVENT","SURVEY_CLOSE_EVENT","SURVEY_QUESTION_EVENT","SURVEY_ANSWER_EVENT","SURVEY_CLICK_EVENT","GRANT_TYPE","AUTHORIZATION","AUTHORIZATION_BEARER","SURVEY_CLIENT","DEFAULT_PREFILL_QUEUE","DIRECT","BY_TAG","BY_NOTE","triggerEvent","el","eventName","data","CustomEvent","event","detail","createEvent","initCustomEvent","dispatchEvent","type","payload","bubbles","cancelable","querySelector","toStr","isCallable","maxSafeInteger","toLength","Array","from","toString","fn","Math","pow","len","number","Number","isNaN","isFinite","floor","abs","toInteger","min","max","arrayLike","items","TypeError","T","mapFn","arguments","kValue","A","this","k","params","evt","Event","find","predicate","thisArg","configurable","writable","localCCSDK","Cookie_1","SurveyManager_1","WebSurvey_1","TriggerManager_1","WebSurveyTriggers_1","Constants_1","setUpEnv","init","destroy","trigger","hide","show","on","prefill","prefillByTag","prefillByNote","CCSDK","queue","q","ccsdkDebug","console","log","args","functionName","splice","apply","_i","queue_1","eventCCReady","initEvent","surveyToken","trim","config","isActive","SurveyManager","surveyInstances","addSurvey","WebSurvey","TriggerManager","triggerInstances","WebSurveyTriggers","trackEvent","enqueueSurvey","setUpCallBack","prefillQueue","object_1","tracking","token","action","keys","forEach","x","addSurveyToQueue","isMobile","target","callback","savePrefillAsObject","restArgs","_a","push","globalSurveyRunning","innerWidth","initializeSurvey","surveyId","setupSurvey","info","tokenId","page","surveyInstance","processQueueInterval","setInterval","processQueueIntervalCB","surveyQueue","pop","setTimeout","destroyIntervals","clearInterval","setSurveyRunning","globalSurveyStartTime","unsetSurveyRunning","WebSurveyHandler_1","utils_1","handler","WebSurveyHandler","getCoolDown","getTokenAnswered","container","browserNotSuitable","setCoolDownPeriod","_this","survey","setTriggers","addEventListener","e","cb","WebSurveyContainer_1","_hideCloseButton","WebSurveyContainer","hideCloseButton","closeCallback","open","setSource","getUrl","close","campaign","coolDownPeriod","bringSurveyIntoView","_iframeOpened","restrictedOrigin","readyForPrefills","_prefills","getSurvey","iframe","iframeContainer","listenForMessages","getIframe","getIframeContainer","appendChild","onwheel","ev","stopPropagation","onresize","resizeSurvey","closeButton","style","bottom","clientHeight","createElement","classList","add","transform","border","borderColor","brandColor","getCloseButton","iframeHeight","button","backgroundColor","innerHTML","visibility","removeChild","body","err","error","pageLoad","src","urlSource","that","onload","websurveyConfigCallBack","message","JSON","parse","pagedLayout","setConfig","removeEventListener","stringify","options","screenWidth","screenHeight","innerHeight","contentWindow","postMessage","attachIframe","pollForPageLoad","scaleFactor","getScaleFactor","height","postPrefillsToSurvey","eventType","response","START","ANSWERED","DATA","END","QUESTION","prefills","prefillType","content","locals","getElementsByTagName","getAttribute","list","result","item","join","mediaQuery","alreadyImportedModules","id","memo","stylesInDom","isOldIE","all","atob","getElement","selector","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","sourceMap","insertStyleElement","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","firstChild","removeStyleElement","parentNode","idx","createStyleElement","attrs","addAttrs","setAttribute","obj","update","remove","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","btoa","link","rel","createLinkElement","autoFixUrls","convertToAbsoluteUrls","unescape","encodeURIComponent","blob","oldSrc","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","cssNode","childNodes","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","$1","test","sitePageViewCount","parseInt","match","lastIndexOf","individualPageViewCount","click","onscroll","doc","documentElement","top","pageXOffset","scrollLeft","clientLeft","pageYOffset","scrollTop","clientTop","ccsdkTopOffset","processScrollTriggers","onclick","evaluateCallBack","triggerInterval","processIntervalTriggers","evaluateTriggers","scrollY","TriggerUtils_1","SUPPORTED_TRIGGERS","scrollTriggerPoint","scrollHeight","showSurvey","pageStartTime","pageTime","TriggerUtils","checkTimeCondition","checkScroll","checkInUrl","inUrl","minPageTime","round","scrollNow","minScrollPixels","checkPageCount","pageCount","minPageCount"],"mappings":"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","file":"cc.en.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","class Cookie {\n    /**\n     * Set/Overwrite a cookie value\n     *\n     * @param name\n     * @param value\n     * @param days      OPTIONAL Days till this cookie will stay valid. Default is current session\n     * @param path      OPTIONAL domain root will be used by default\n     */\n    static set(name : any, value : any, days : any, path : any) {\n      if (days) {\n          var date = new Date();\n              date.setTime(date.getTime()+(days*24*60*60*1000));\n          var expires = \"; expires=\"+date.toUTCString();\n      } else var expires = \"\";\n\n      var dir = path || '/';\n      document.cookie = name+\"=\"+value+expires+\"; path=\"+dir;\n  }\n\n  /**\n   * Retrieve a cookie value\n   *\n   * @param name\n   * @return String|null\n   */\n  static get(name) {\n      var nameEQ = name + \"=\";\n      var ca = document.cookie.split(';');\n      for(var i=0;i < ca.length;i++) {\n          var c = ca[i];\n          while (c.charAt(0)==' ') c = c.substring(1,c.length);\n          if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\n      }\n      return null;\n  }\n\n  /**\n   * Remove a cookie\n   *\n   * @param name\n   */\n  static delete(name) {\n    Cookie.set(name,\"\",-1, undefined);\n  }\n\n  static getParameterByName(name : string, url : any) {\n    if (!url) url = window.location.href;\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n        results = regex.exec(url);\n    if (!results) return null;\n    if (!results[2]) return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n  }\n}\n\nexport { Cookie };\n","class Constants {\n  static CCTriggerPageStartTime = \"cc-trigger-page-start-time\";\n  static CCTriggerPageElapsedTime = \"cc-trigger-page-elapsed-time\";\n  static CCTriggerSiteStartTime = \"cc-trigger-site-start-time\";\n  static CCTriggerSiteElapsedTime = \"cc-trigger-site-elapsed-time\";\n  static CCTriggerSitePageViewCount = \"cc-trigger-site-page-count\";\n  static CCTriggerIndividualPageViewCount = \"cc-trigger-individual-page-count\";\n  static SURVEY_IMPRESSION_EVENT = \"onImpression\";\n  static SURVEY_START_EVENT = \"onStart\";\n  static SURVEY_DATA_EVENT = \"onData\";\n  static SURVEY_END_EVENT = \"onEnd\";\n  static SURVEY_CLOSE_EVENT = \"onClose\";\n  static SURVEY_QUESTION_EVENT = \"onQuestion\";\n  static SURVEY_ANSWER_EVENT = \"onAnswer\";\n  static SURVEY_CLICK_EVENT = \"onClick\";\n  static GRANT_TYPE = \"password\";\n  static AUTHORIZATION = \"Authorization\";\n  static AUTHORIZATION_BEARER = \"Bearer\";\n  static SURVEY_CLIENT = \"JS-MicroWeb\";\n}\n\nexport const DEFAULT_PREFILL_QUEUE = {\n  DIRECT: [],\n  BY_TAG: [],\n  BY_NOTE: []\n};\n\nexport { Constants };\n","export function triggerEvent(el: any, eventName: string, data: Object) {\n  if (typeof CustomEvent === \"function\") {\n    var event = <any>new CustomEvent(eventName, { detail: data });\n  } else {\n    var event = <any>document.createEvent(\"CustomEvent\");\n    event.initCustomEvent(eventName, true, true, data);\n  }\n\n  el.dispatchEvent(event);\n}\n\nexport function dispatchEvent(type, payload) {\n  let event = new CustomEvent(type, {\n    detail: payload,\n    bubbles: true,\n    cancelable: false\n  });\n  let iframe = document.querySelector(\".ccsdk.ifrcntr\");\n\n  (iframe || document).dispatchEvent(event);\n}\n","// Production steps of ECMA-262, Edition 6, 22.1.2.1\nif (!(<any>Array).from) {\n  (<any>Array).from = (function () {\n    var toStr = Object.prototype.toString;\n    var isCallable = function (fn) {\n      return typeof fn === 'function' || toStr.call(fn) === '[object Function]';\n    };\n    var toInteger = function (value) {\n      var number = Number(value);\n      if (isNaN(number)) {\n        return 0;\n      }\n      if (number === 0 || !isFinite(number)) {\n        return number;\n      }\n      return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\n    };\n    var maxSafeInteger = Math.pow(2, 53) - 1;\n    var toLength = function (value) {\n      var len = toInteger(value);\n      return Math.min(Math.max(len, 0), maxSafeInteger);\n    };\n\n    // The length property of the from method is 1.\n    return function from(arrayLike /*, mapFn, thisArg */) {\n      // 1. Let C be the this value.\n      var C = this;\n\n      // 2. Let items be ToObject(arrayLike).\n      var items = Object(arrayLike);\n\n      // 3. ReturnIfAbrupt(items).\n      if (arrayLike == null) {\n        throw new TypeError('Array.from requires an array-like object - not null or undefined');\n      }\n\n      // 4. If mapfn is undefined, then let mapping be false.\n      var mapFn = arguments.length > 1 ? arguments[1] : void undefined;\n      var T;\n      if (typeof mapFn !== 'undefined') {\n        // 5. else\n        // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.\n        if (!isCallable(mapFn)) {\n          throw new TypeError('Array.from: when provided, the second argument must be a function');\n        }\n\n        // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.\n        if (arguments.length > 2) {\n          T = arguments[2];\n        }\n      }\n\n      // 10. Let lenValue be Get(items, \"length\").\n      // 11. Let len be ToLength(lenValue).\n      var len = toLength(items.length);\n\n      // 13. If IsConstructor(C) is true, then\n      // 13. a. Let A be the result of calling the [[Construct]] internal method \n      // of C with an argument list containing the single item len.\n      // 14. a. Else, Let A be ArrayCreate(len).\n      var A = isCallable(C) ? Object(new C(len)) : new Array(len);\n\n      // 16. Let k be 0.\n      var k = 0;\n      // 17. Repeat, while k < len… (also steps a - h)\n      var kValue;\n      while (k < len) {\n        kValue = items[k];\n        if (mapFn) {\n          A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);\n        } else {\n          A[k] = kValue;\n        }\n        k += 1;\n      }\n      // 18. Let putStatus be Put(A, \"length\", len, true).\n      A.length = len;\n      // 20. Return A.\n      return A;\n    };\n  }());\n}\n\n// custom event polyfill\n(function () {\n\n  if (typeof (<any>window).CustomEvent === \"function\") return false;\n\n  function CustomEvent(event, params) {\n    params = params || {\n      bubbles: false,\n      cancelable: false,\n      detail: undefined\n    };\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  }\n\n  CustomEvent.prototype = (<any>window).Event.prototype;\n\n  (<any>window).CustomEvent = CustomEvent;\n})();\n\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\nif (!(<any>Array.prototype).find) {\n  Object.defineProperty(Array.prototype, 'find', {\n    value: function (predicate) {\n      // 1. Let O be ? ToObject(this value).\n      if (this == null) {\n        throw new TypeError('\"this\" is null or not defined');\n      }\n\n      var o = Object(this);\n\n      // 2. Let len be ? ToLength(? Get(O, \"length\")).\n      var len = o.length >>> 0;\n\n      // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n      if (typeof predicate !== 'function') {\n        throw new TypeError('predicate must be a function');\n      }\n\n      // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n      var thisArg = arguments[1];\n\n      // 5. Let k be 0.\n      var k = 0;\n\n      // 6. Repeat, while k < len\n      while (k < len) {\n        // a. Let Pk be ! ToString(k).\n        // b. Let kValue be ? Get(O, Pk).\n        // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n        // d. If testResult is true, return kValue.\n        var kValue = o[k];\n        if (predicate.call(thisArg, kValue, k, o)) {\n          return kValue;\n        }\n        // e. Increase k by 1.\n        k++;\n      }\n\n      // 7. Return undefined.\n      return undefined;\n    },\n    configurable: true,\n    writable: true\n  });\n}","import { Cookie } from \"./helpers/Cookie\";\nimport { SurveyManager } from \"./SurveyManager\";\nimport { PrefillsBatchOrSingle } from \"./types\";\nimport { WebSurvey } from \"./WebSurvey\";\nimport { TriggerManager } from \"./TriggerManager\";\nimport { WebSurveyTriggers } from \"./WebSurveyTriggers\";\nimport { DEFAULT_PREFILL_QUEUE } from \"./Constants\";\n\n/**\n * functions that are exposed to SDK User are written here.\n * Entry point for CCSDK.\n */\n// declare var Sentry: any;\n\nlet localCCSDK;\n\n// let instances : any = {};\n\n(window as any).globalSurveyRunning = false;\n(window as any).ccsdkDebug = false;\n(window as any).isMobile = window.innerWidth <= 768 ? true : false;\n\nexport function setUpEnv() {\n  localCCSDK = {\n    init: init,\n    destroy: destroy,\n    trigger: trigger,\n    hide: hide,\n    show: show,\n    on: on,\n    prefill: prefill,\n    prefillByTag: prefillByTag,\n    prefillByNote: prefillByNote\n  };\n\n  if (typeof (window as any).CCSDK !== \"undefined\") {\n    var queue = (window as any).CCSDK.q;\n    (window as any).CCSDK = function () {\n      if (arguments && arguments.length == 0) {\n        var time = new Date();\n      } else {\n        (window as any).ccsdkDebug ? console.log(arguments) : \"\";\n        var args = (Array as any).from(arguments);\n        //Call this functions as ccsdk('functionName', ['argument1', 'argument2']);\n        var functionName = args.splice(0, 1)[0];\n        (window as any).ccsdkDebug ? console.log(functionName) : \"\";\n        return localCCSDK[functionName].apply(this, args);\n      }\n    };\n    if (queue) {\n      for (var q of queue) {\n        var args = (Array as any).from(q);\n        var functionName = args.splice(0, 1)[0];\n        localCCSDK[functionName].apply(this, args);\n      }\n    }\n    let eventCCReady: Event = document.createEvent(\"Event\");\n    eventCCReady.initEvent(\"ccready\", true, true);\n    document.dispatchEvent(eventCCReady);\n  }\n}\n\nsetUpEnv();\n\nexport function init(surveyToken: any) {\n  let isV2 = true;\n  //config options can be set in arguments[1]\n  //available config options : themeColor\n  surveyToken = decodeURIComponent(surveyToken).trim();\n  let config = typeof arguments[1] === \"object\" ? arguments[1] : {};\n  //create survey instance\n  if (\n    typeof Cookie.get(surveyToken + \"-finish\") !== \"undefined\" &&\n    Cookie.get(surveyToken + \"-finish\")\n  ) {\n    return;\n  }\n  if (\n    typeof Cookie.get(surveyToken + \"-coolDown\") !== \"undefined\" &&\n    Cookie.get(surveyToken + \"-coolDown\")\n  ) {\n    return;\n  }\n\n  if (typeof config.isActive !== \"undefined\" && config.isActive) {\n    if (!SurveyManager.surveyInstances[surveyToken]) {\n      // Add survey to instances list\n      SurveyManager.addSurvey(surveyToken, new WebSurvey(surveyToken, config));\n    }\n\n    if (!TriggerManager.triggerInstances[surveyToken]) {\n      // add trigger to instances list\n      TriggerManager.addSurvey(surveyToken, new WebSurveyTriggers(config));\n    }\n\n    trackEvent(surveyToken);\n\n    if (!TriggerManager.enqueueSurvey) {\n      setUpCallBack();\n    }\n\n    if (SurveyManager.prefillQueue[surveyToken]) {\n      let object = SurveyManager.prefillQueue[surveyToken];\n      SurveyManager.surveyInstances[surveyToken].tracking.trackEvent(\n        \"Init MicroSurvey\",\n        {\n          token: surveyToken,\n          data: {\n            name: \"Prefill lazily\",\n            action: surveyToken\n          }\n        },\n        null,\n        null\n      );\n\n      Object.keys(DEFAULT_PREFILL_QUEUE).forEach((x) => {\n        if (object[x] && object[x].length > 0) {\n          SurveyManager.surveyInstances[surveyToken].prefill(object, x);\n        }\n      });\n\n      delete SurveyManager.prefillQueue[surveyToken];\n      // if (object.directPrefills) {\n      //   object.directPrefills.forEach(x => {\n\n      //   });\n      //   delete object.directPrefills;\n      // } else if (object.byTagPrefills) {\n      //   object.byTagPrefills.forEach(x => {\n      //     SurveyManager.surveyInstances[surveyToken].prefill(x, 'BY_TAG');\n      //   });\n      //   delete object.byTagPrefills;\n      // } else if (object.byNotePrefills) {\n      //   object.byTagPrefills.forEach(x => {\n      //     SurveyManager.surveyInstances[surveyToken].prefill(x, 'BY_NOTE');\n      //   });\n      //   delete object.byNotePrefills;\n      // }\n    }\n    return SurveyManager.surveyInstances[surveyToken];\n  } else {\n    //do nothing\n  }\n}\n\nexport function setUpCallBack() {\n  TriggerManager.enqueueSurvey = (token) => {\n    SurveyManager.addSurveyToQueue(token);\n  };\n}\n\nexport function trackEvent(surveyToken: any) {\n  SurveyManager.surveyInstances[surveyToken].tracking.trackEvent(\n    \"Init MicroSurvey\",\n    {\n      token: surveyToken,\n      data: {\n        name: (<any>window).isMobile ? \"Mobile Mode\" : \"Desktop Mode\",\n        action: surveyToken\n      }\n    },\n    null,\n    null\n  );\n}\n\nexport function destroy(surveyToken: string) {\n  //remove from trigger manager, delete instance.\n  SurveyManager.destroy(surveyToken);\n  TriggerManager;\n}\n//\nexport function trigger(surveyToken: string, type: string, target: string) {\n  (window as any).ccsdkDebug ? console.log(SurveyManager.surveyInstances) : \"\";\n\n  if (typeof SurveyManager.surveyInstances[surveyToken] != \"undefined\") {\n    SurveyManager.surveyInstances[surveyToken].tracking.trackEvent(\n      \"Trigger Type\",\n      {\n        token: surveyToken,\n        data: {\n          name: type,\n          action: surveyToken\n        }\n      },\n      null,\n      null\n    );\n    SurveyManager.surveyInstances[surveyToken].trigger(type, target);\n  }\n  //tell trigger manager to register trigger.\n}\n\nexport function on(surveyToken: string, type: string, callback: any) {\n  if (typeof SurveyManager.surveyInstances[surveyToken] != \"undefined\") {\n    SurveyManager.surveyInstances[surveyToken].tracking.trackEvent(\n      \"Event Listeners\",\n      {\n        token: surveyToken,\n        data: {\n          name: type,\n          action: surveyToken\n        }\n      },\n      null,\n      null\n    );\n    SurveyManager.surveyInstances[surveyToken].on(type, callback);\n  }\n}\n\nfunction savePrefillAsObject(surveyToken, restArgs, type) {\n  let prefill;\n  if (typeof restArgs[0] === \"string\") {\n    prefill = { [restArgs[0]]: restArgs[1] };\n  } else {\n    prefill = restArgs[0];\n  }\n  if (\n    typeof SurveyManager.surveyInstances[surveyToken] != \"undefined\" &&\n    restArgs[0]\n  ) {\n    SurveyManager.surveyInstances[surveyToken].prefill(prefill, type);\n  } else {\n    if (!SurveyManager.prefillQueue[surveyToken]) {\n      SurveyManager.prefillQueue[surveyToken] = {\n        DIRECT: [],\n        BY_TAG: [],\n        BY_NOTE: []\n      };\n    }\n    SurveyManager.prefillQueue[surveyToken][type].push(prefill);\n  }\n}\n\nexport function prefill(\n  surveyToken: string,\n  ...restArgs: PrefillsBatchOrSingle\n) {\n  savePrefillAsObject(surveyToken, restArgs, \"DIRECT\");\n}\n\nexport function prefillByTag(\n  surveyToken: string,\n  ...restArgs: PrefillsBatchOrSingle\n) {\n  savePrefillAsObject(surveyToken, restArgs, \"BY_TAG\");\n}\n\nexport function prefillByNote(\n  surveyToken: string,\n  ...restArgs: PrefillsBatchOrSingle\n) {\n  savePrefillAsObject(surveyToken, restArgs, \"BY_NOTE\");\n}\n\nexport function show(surveyToken: string) {\n  if (typeof SurveyManager.surveyInstances[surveyToken] != \"undefined\") {\n    SurveyManager.surveyInstances[surveyToken].show();\n  }\n}\n\nexport function hide(surveyToken: string, callback) {\n  if (typeof SurveyManager.surveyInstances[surveyToken] != \"undefined\") {\n    SurveyManager.surveyInstances[surveyToken].hide(callback);\n  }\n}\n","//Survey Manager manages and queues survey.\n\nimport { TriggerManager } from \"./TriggerManager\";\nimport { WebSurvey } from \"./WebSurvey\";\nimport { PrefillType } from \"./types\";\nimport { Cookie } from \"./helpers/Cookie\";\n\nclass SurveyManager {\n  static surveyQueue: any = [];\n  static processQueueInterval: any = null;\n  static prefillQueue: {\n    [surveyToken: string]: {\n      [k in PrefillType]: any;\n    };\n  } = {};\n  static surveyInstances: {\n    [key: string]: WebSurvey;\n  } = {};\n\n  static initializeSurvey(surveyId: string) {\n    //check if survey ran?\n    //do survey initialization.\n    if (\n      !SurveyManager.surveyInstances ||\n      !SurveyManager.surveyInstances[surveyId]\n    ) {\n      (<any>window).ccsdkDebug\n        ? console.info(\n            \"Microsurvey not properly set up. Contact Support.\",\n            { tokenId: surveyId },\n            {\n              page: window.location.href\n            }\n          )\n        : \"\";\n      return;\n    }\n\n    SurveyManager.surveyInstances[surveyId].setupSurvey();\n  }\n\n  static addSurvey(surveyId, surveyInstance) {\n    SurveyManager.surveyInstances[surveyId] = surveyInstance;\n\n    if (SurveyManager.processQueueInterval == null) {\n      SurveyManager.processQueueInterval = setInterval(\n        SurveyManager.processQueueIntervalCB,\n        100\n      );\n    }\n  }\n\n  static addSurveyToQueue(token) {\n    (window as any).ccsdkDebug\n      ? console.log(\"Adding survey ID : \" + token)\n      : \"\";\n    if (SurveyManager.surveyQueue.indexOf(token) === -1) {\n      if (\n        typeof Cookie.get(token + \"-finish\") !== \"undefined\" &&\n        Cookie.get(token + \"-finish\")\n      ) {\n        return;\n      }\n      if (\n        typeof Cookie.get(token + \"-coolDown\") !== \"undefined\" &&\n        Cookie.get(token + \"-coolDown\")\n      ) {\n        return;\n      }\n      SurveyManager.surveyQueue.push(token);\n    }\n  }\n\n  static processQueueIntervalCB() {\n    if ((window as any).globalSurveyRunning == true) {\n      return;\n    } else {\n      let surveyId = SurveyManager.surveyQueue.pop();\n      (window as any).ccsdkDebug\n        ? console.log(\"Processing survey ID \" + surveyId)\n        : \"\";\n      if (surveyId) {\n        SurveyManager.initializeSurvey(surveyId);\n      }\n    }\n  }\n\n  public static destroy(token) {\n    setTimeout(() => {\n      delete SurveyManager.surveyInstances[token];\n    }, 250);\n  }\n\n  static destroyIntervals() {\n    clearInterval(SurveyManager.processQueueInterval);\n    SurveyManager.processQueueInterval = null;\n  }\n\n  public static setSurveyRunning() {\n    (window as any).globalSurveyRunning = true;\n    (window as any).globalSurveyStartTime = new Date();\n  }\n\n  public static unsetSurveyRunning() {\n    (window as any).globalSurveyRunning = false;\n  }\n}\n\nexport { SurveyManager };\n","import { WebSurveyHandler } from \"./WebSurveyHandler\";\nimport { WebSurveyTriggers } from \"./WebSurveyTriggers\";\nimport { triggerEvent, dispatchEvent } from \"./utils\";\nimport { Constants } from \"./Constants\";\n\nexport class WebSurvey {\n  surveyToken: string;\n  config;\n  handler: WebSurveyHandler;\n\n  triggers: WebSurveyTriggers;\n  tracking = {\n    trackEvent: this.trackEvent\n  };\n  util: any;\n\n  constructor(token, config) {\n    this.surveyToken = token;\n    this.config = config;\n    this.handler = new WebSurveyHandler(this.surveyToken, config);\n\n    this.init();\n  }\n\n  setupSurvey() {\n    if (\n      !this.handler.getCoolDown(this.surveyToken) &&\n      !this.handler.getTokenAnswered(this.surveyToken) &&\n      !this.handler.container.browserNotSuitable\n    ) {\n      this.show();\n      this.handler.setCoolDownPeriod(this.config, this.surveyToken);\n    }\n  }\n\n  init() {\n    setTimeout(() => {\n      triggerEvent(document, this.surveyToken + \"-ready\", { survey: this });\n    }, 100);\n  }\n\n  setTriggers() {}\n\n  public trigger(...args) {}\n\n  public on(type, callback) {\n    document.addEventListener(type + \"-\" + this.surveyToken, function (e: any) {\n      callback(e.detail);\n    });\n  }\n\n  public prefill(object, type) {\n    this.handler.prefill(object, type);\n  }\n\n  show() {\n    this.handler.show();\n    dispatchEvent(\n      `${Constants.SURVEY_IMPRESSION_EVENT}-${this.surveyToken}`,\n      this.surveyToken\n    );\n  }\n\n  trackEvent(...args) {}\n\n  hide(cb) {\n    this.handler.hide();\n    if (cb) {\n      cb();\n    }\n  }\n}\n","import { WebSurveyContainer } from \"./WebSurveyContainer\";\nimport { Cookie } from \"./helpers/Cookie\";\nimport { dispatchEvent } from \"./utils\";\nimport { Constants } from \"./Constants\";\n\nexport class WebSurveyHandler {\n  // url = \"https://cx.getcloudcherry.com/perf-s1/#/login?token=\";\n  url = \"https://cx.cloudcherry.com/ns/#/login?token=\";\n  // url = \"http://localhost:8100/#/login?token=\";\n  token = \"mr-100550\";\n  container: WebSurveyContainer;\n  _hideCloseButton: boolean | null = null;\n  public set showCloseButton(value: boolean) {\n    this._hideCloseButton = value;\n    if (this.container) {\n      this.container.hideCloseButton = value;\n    }\n  }\n\n  config;\n\n  constructor(token, config) {\n    this.token = token;\n    this.config = config;\n    this.config.token = token;\n\n    this.container = new WebSurveyContainer(this.config);\n    if (this._hideCloseButton !== null) {\n      this.container.hideCloseButton = this._hideCloseButton;\n    }\n  }\n\n  show(token = this.token) {\n    this.container.closeCallback = (event: Event) => {\n      dispatchEvent(\n        `${Constants.SURVEY_CLOSE_EVENT}-${this.token}`,\n        this.token\n      );\n    };\n\n    this.container.open();\n    this.container.setSource(this.getUrl(token || this.token));\n  }\n\n  hide() {\n    this.container.close();\n  }\n\n  getUrl(token: string): string {\n    return `${this.url}${token}&mode=microsurvey`;\n  }\n\n  setCoolDownPeriod(campaign, surveyToken) {\n    if (campaign && campaign.coolDownPeriod && campaign.coolDownPeriod != 0) {\n      Cookie.set(\n        surveyToken + \"-coolDown\",\n        \"true\",\n        campaign.coolDownPeriod / 86400,\n        \"/\"\n      );\n    } else {\n      Cookie.set(surveyToken + \"-coolDown\", \"true\", 1, \"/\");\n    }\n  }\n\n  getCoolDown(surveyToken) {\n    return Cookie.get(surveyToken + \"-coolDown\");\n  }\n\n  getTokenAnswered(surveyToken) {\n    return Cookie.get(surveyToken);\n  }\n\n  public prefill(object, type) {\n    this.container.prefill(object, type);\n  }\n}\n","import \"./global.scss\";\nimport { dispatchEvent } from \"./utils\";\nimport { Constants } from \"./Constants\";\nimport { Cookie } from \"./helpers/Cookie\";\n\nexport class WebSurveyContainer {\n  public iframe: HTMLIFrameElement;\n  public iframeContainer: HTMLDivElement;\n  public hideCloseButton = false;\n  public closeCallback: Function | null = null;\n  urlSource;\n  bringSurveyIntoView = false;\n\n  _iframeOpened: boolean | null = null;\n  restrictedOrigin = \"*\";\n  config;\n  public browserNotSuitable = false;\n  readyForPrefills = false;\n  _prefills = [];\n  pageLoad: boolean;\n  closeButton: HTMLButtonElement;\n\n  constructor(config) {\n    this.config = config;\n    this.init();\n  }\n\n  init() {\n    [this.iframe, this.iframeContainer] = this.getSurvey();\n    this.listenForMessages();\n  }\n\n  getSurvey(): [HTMLIFrameElement, HTMLDivElement] {\n    let iframe = this.getIframe();\n    let iframeContainer = this.getIframeContainer();\n\n    iframeContainer.appendChild(iframe);\n\n    iframeContainer.onwheel = (ev) => {\n      ev.stopPropagation();\n    };\n\n    window.onresize = (ev) => {\n      this.resizeSurvey();\n\n      if (!this.closeButton) {\n        return;\n      }\n\n      if (window.innerWidth > 768) {\n        this.closeButton.style.bottom = `${\n          this.iframeContainer.clientHeight - 14\n        }px`;\n      } else {\n        this.closeButton.style.bottom = `${\n          this.iframeContainer.clientHeight - 48\n        }px`;\n      }\n    };\n    return [iframe, iframeContainer];\n  }\n\n  getIframeContainer(): HTMLDivElement {\n    let iframeContainer = document.createElement(\"div\");\n    iframeContainer.classList.add(\"ccsdk\");\n    iframeContainer.classList.add(\"ifr-cntr\");\n    iframeContainer.style.transform = \"translateY(100vh)\";\n    return iframeContainer;\n  }\n\n  getIframe(): HTMLIFrameElement {\n    let iframe = document.createElement(\"iframe\");\n    iframe.classList.add(\"ifr\");\n    iframe.style.border = \"0\";\n    iframe.style.borderColor = this.config.brandColor;\n    return iframe;\n  }\n\n  getCloseButton(iframeHeight: number) {\n    let button = document.createElement(\"button\");\n    button.style.backgroundColor = this.config.brandColor;\n    button.innerHTML =\n      '<img src=\"https://cxnext.blob.core.windows.net/venki/times.png\" class=\"close-icon\">';\n\n    if (window.innerWidth > 768) {\n      button.style.bottom = `${iframeHeight - 14}px`;\n    } else {\n      button.style.bottom = `${iframeHeight - 48}px`;\n    }\n\n    button.addEventListener(\"click\", (event) => {\n      if (this.closeCallback) {\n        this.closeCallback(event);\n      }\n      button.style.visibility = \"hidden\";\n      this.close();\n    });\n\n    return button;\n  }\n\n  public close() {\n    if (!this.iframeContainer) {\n      return;\n    }\n\n    (<any>window).globalSurveyRunning = false;\n    this.bringSurveyIntoView = false;\n    this.resizeSurvey();\n    this._iframeOpened = false;\n    this.iframeContainer.style.transform = \"translateY(100vh)\";\n    setTimeout(() => {\n      this.destroy();\n    }, 250);\n  }\n\n  destroy() {\n    try {\n      this.iframeContainer.removeChild(this.iframe);\n      this.iframe = null;\n      document.body.removeChild(this.iframeContainer);\n      this.iframeContainer = null;\n    } catch (err) {\n      console.error(err);\n    }\n    this.pageLoad = false;\n  }\n\n  public setSource(url: string) {\n    if (!this.iframe) {\n      return;\n    }\n\n    this.iframe.src = url;\n    this.urlSource = url;\n    let that = this;\n\n    this.iframe.onload = () => {\n      console.info(\"Iframe loaded. Ready for showing to user.\");\n      this.pageLoad = true;\n    };\n\n    function websurveyConfigCallBack(event) {\n      if (event.data) {\n        try {\n          let message = JSON.parse(event.data);\n          if (\n            message &&\n            message.type === \"GET_CONFIG\" &&\n            message.token === that.config.token\n          ) {\n            that.config.pagedLayout = false;\n            that.setConfig(that.config);\n            window.removeEventListener(\"message\", websurveyConfigCallBack);\n          }\n        } catch (err) {\n          console.log(err);\n        }\n      }\n    }\n\n    window.addEventListener(\"message\", websurveyConfigCallBack);\n  }\n\n  public setConfig(config) {\n    let message = JSON.stringify({\n      config,\n      options: {\n        screenWidth: window.innerWidth,\n        screenHeight: window.innerHeight\n      },\n      mode: \"MICROSURVEY\"\n    });\n\n    this.iframe.contentWindow.postMessage(message, this.restrictedOrigin);\n  }\n\n  open() {\n    if (this.browserNotSuitable) {\n      console.info(\n        \"Cookie and Storage not accessible for survey. Survey will not show up.\"\n      );\n      return;\n    }\n    (<any>window).globalSurveyRunning = true;\n    if (!this.iframeContainer || !this.iframe) {\n      this.init();\n      this.attachIframe();\n      this.setConfig(this.urlSource);\n    } else {\n      this.attachIframe();\n    }\n  }\n\n  attachIframe() {\n    document.body.appendChild(this.iframeContainer);\n    let that = this;\n    function pollForPageLoad() {\n      if (that.pageLoad) {\n        that.bringSurveyIntoView = true;\n        that.resizeSurvey();\n      } else {\n        setTimeout(() => {\n          pollForPageLoad();\n        }, 150);\n      }\n    }\n\n    // poll for page load\n    pollForPageLoad();\n\n    this._iframeOpened = true;\n    if (!this.hideCloseButton) {\n      let scaleFactor = 1; // 0.66;\n      this.resizeSurvey();\n      this.closeButton = this.getCloseButton(\n        this.iframe.clientHeight * scaleFactor\n      );\n      this.closeButton.classList.add(\"close-btn\");\n      this.iframeContainer.appendChild(this.closeButton);\n    }\n  }\n\n  resizeSurvey() {\n    let scaleFactor = this.getScaleFactor();\n\n    let transform = !this.bringSurveyIntoView\n      ? \"translateY(100vh)\"\n      : \"translateY(0)\";\n\n    this.iframeContainer.style.transform = `${transform} scale(${scaleFactor})`;\n  }\n\n  getScaleFactor() {\n    let height = window.innerHeight;\n    let width = window.innerWidth;\n\n    if (width <= 768) {\n      return 1;\n      // mobile\n    }\n\n    // large screens\n    if (height > 768) {\n      return 1;\n    }\n\n    // medium screens\n    if (height <= 768 && height > 701) {\n      return 0.9;\n    }\n\n    // small screens\n    if (height <= 700) {\n      return 0.8;\n    }\n  }\n\n  listenForMessages() {\n    var that = this;\n    window.addEventListener(\"message\", (ev) => {\n      if (ev.data) {\n        try {\n          let message = JSON.parse(ev.data);\n          if (message.type === \"READY_FOR_PREFILLS\") {\n            that.readyForPrefills = true;\n            if (that._prefills.length > 0) {\n              that._prefills.forEach((x: [any, any]) => {\n                that.postPrefillsToSurvey(x[0], x[1]);\n              });\n            }\n          } else if (message.type === \"STORAGE_EXCEPTION\") {\n            that._iframeOpened = false;\n            that.close();\n            that.browserNotSuitable = true;\n            console.info(\"Storage exception within iframe\");\n          } else if (message.type === \"REDIRECT_TO_FALLBACK\") {\n            that.setConfig(that.config);\n            that.readyForPrefills = false;\n          } else if (message.type === \"EVENT_FROM_SURVEY\") {\n            let eventTypeMap = {\n              START: \"onStart\",\n              ANSWERED: \"onAnswer\",\n              DATA: \"onData\",\n              END: \"onEnd\",\n              QUESTION: \"onQuestion\"\n            };\n\n            if (message.data.eventType === \"END\") {\n              if (\n                message.data.response !== null &&\n                message.data.response.token === that.config.token\n              ) {\n                setTimeout(() => {\n                  that.close();\n                  // websurvey sets the cookie in the iframe and not in the parent page\n                  //set done cookie for 30 days.\n                  Cookie.set(that.config.token + \"-finish\", \"true\", 30, \"/\");\n                  dispatchEvent(\n                    `${Constants.SURVEY_CLOSE_EVENT}-${that.config.token}`,\n                    that.config.token\n                  );\n                }, 3000);\n\n                if (message.data.response.url) {\n                  // redirect url will be opened in new window\n                  window.open(message.data.response.url, \"_blank\");\n                }\n              }\n            }\n            dispatchEvent(\n              `${eventTypeMap[message.data.eventType]}-${that.config.token}`,\n              message.data.response\n            );\n          }\n        } catch (err) {}\n      }\n    });\n  }\n\n  public prefill(object, type) {\n    if (this.readyForPrefills && object) {\n      this.postPrefillsToSurvey(object, type);\n    } else {\n      this._prefills.push([object, type]);\n    }\n  }\n\n  postPrefillsToSurvey(prefills, type) {\n    let message = JSON.stringify({\n      prefills: prefills,\n      prefillType: type,\n      type: \"PREFILLS_FROM_HOST\"\n    });\n\n    this.iframe.contentWindow.postMessage(message, this.restrictedOrigin);\n  }\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/rtl-css-loader/index.js!../node_modules/sass-loader/lib/loader.js!./global.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/rtl-css-loader/index.js!../node_modules/sass-loader/lib/loader.js!./global.scss\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/rtl-css-loader/index.js!../node_modules/sass-loader/lib/loader.js!./global.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../node_modules/rtl-css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, typeof document !== 'undefined' && document.getElementsByTagName('html')[0].getAttribute('dir') === 'rtl' ? \".ccsdk.ifr-cntr{z-index:9999;transition:transform .35s ease-in-out;width:376px;min-height:250px;transform-origin:0% 100%;max-height:644px;box-shadow:0 5px 40px rgba(0,0,0,.16);opacity:1;height:calc(100% - 120px);position:fixed;left:24px;bottom:24px}.ccsdk .ifr{height:100%;width:100%;transform-origin:0% 100%;border:1px solid}.ccsdk .close-btn{left:16px;top:16px;position:absolute;border-radius:100%;width:24px;height:24px;padding:2px;border:none;visibility:visible;display:flex;align-items:center;justify-content:center;cursor:pointer}.ccsdk .close-btn .close-icon{width:100%;height:100%}.ccsdk .close-btn.hidden{visibility:hidden}@media screen and (max-width:768px){.ccsdk .ifr,.ccsdk.ifr-cntr{height:100%;width:100%}.ccsdk.ifr-cntr{min-height:100%;max-height:100%;left:0;bottom:0}.ccsdk .close-btn{left:8px;height:40px;width:40px}}\" : \".ccsdk.ifr-cntr{z-index:9999;transition:transform .35s ease-in-out;width:376px;min-height:250px;transform-origin:100% 100%;max-height:644px;box-shadow:0 5px 40px rgba(0,0,0,.16);opacity:1;height:calc(100% - 120px);position:fixed;right:24px;bottom:24px}.ccsdk .ifr{height:100%;width:100%;transform-origin:100% 100%;border:1px solid}.ccsdk .close-btn{right:16px;top:16px;position:absolute;border-radius:100%;width:24px;height:24px;padding:2px;border:none;visibility:visible;display:flex;align-items:center;justify-content:center;cursor:pointer}.ccsdk .close-btn .close-icon{width:100%;height:100%}.ccsdk .close-btn.hidden{visibility:hidden}@media screen and (max-width:768px){.ccsdk .ifr,.ccsdk.ifr-cntr{height:100%;width:100%}.ccsdk.ifr-cntr{min-height:100%;max-height:100%;right:0;bottom:0}.ccsdk .close-btn{right:8px;height:40px;width:40px}}\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function() {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\tvar result = [];\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar item = this[i];\n\t\t\tif(item[2]) {\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\n\t\t\t} else {\n\t\t\t\tresult.push(item[1]);\n\t\t\t}\n\t\t}\n\t\treturn result.join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t}\n\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","//Manages trigger.\nimport { Cookie } from \"./helpers/Cookie\";\nimport { Constants } from \"./Constants\";\nimport { WebSurveyTriggers } from \"./WebSurveyTriggers\";\n\n//collect initial data\n//if on site time is null, add on site time\nif (Cookie.get(Constants.CCTriggerSiteStartTime) == null) {\n  Cookie.set(Constants.CCTriggerSiteStartTime, new Date(), undefined, undefined);\n}\n//always add on page Time\nCookie.set(Constants.CCTriggerPageStartTime, new Date(), undefined, undefined);\n\nlet sitePageViewCount = Cookie.get(Constants.CCTriggerSitePageViewCount);\nif (sitePageViewCount == null) {\n  Cookie.set(Constants.CCTriggerSitePageViewCount, 1, undefined, undefined);\n} else {\n  sitePageViewCount = (parseInt(sitePageViewCount) + 1).toString();\n  Cookie.set(Constants.CCTriggerSitePageViewCount, sitePageViewCount, undefined, undefined);\n}\n\nlet pathname = window.location.pathname;\nif (pathname.match(/\\./)) {\n  pathname = pathname.substring(0, pathname.lastIndexOf('/'));\n}\nlet individualPageViewCount = Cookie.get(Constants.CCTriggerIndividualPageViewCount);\nif (individualPageViewCount == null) {\n  Cookie.set(Constants.CCTriggerIndividualPageViewCount + pathname, 1, undefined, undefined);\n} else {\n  individualPageViewCount = (parseInt(individualPageViewCount) + 1).toString();\n  Cookie.set(Constants.CCTriggerIndividualPageViewCount + pathname, individualPageViewCount, undefined, undefined);\n}\n\n(window as any).click = 0;\n\nwindow.onscroll = function (e) {\n  // called when the window is scrolled.  \n  let doc = document.documentElement;\n  let left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n  let top = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n  (window as any).ccsdkTopOffset = top;\n  TriggerManager.processScrollTriggers(top);\n}\n\ndocument.onclick = function (e) {\n  (window as any).click++;\n}\n\n//TriggerManager adds to survey Queue\nclass TriggerManager {\n\n  static triggerInterval: any = null;\n  static triggerInstances: {\n    [key: string]: WebSurveyTriggers\n  } = {};\n\n  static enqueueSurvey: Function;\n\n  constructor() {\n\n  }\n\n  static addSurvey(surveyId: any, trigger: WebSurveyTriggers) {\n    TriggerManager.triggerInstances[surveyId] = trigger;\n\n    trigger.evaluateCallBack = () => {\n      TriggerManager.enqueueSurvey && TriggerManager.enqueueSurvey(surveyId);\n    }\n\n    if (Object.keys(TriggerManager.triggerInstances).length >= 1) {\n      (window as any).ccsdkDebug ? console.log(TriggerManager.triggerInterval) : '';\n      if (TriggerManager.triggerInterval == null) {\n        (window as any).ccsdkDebug ? console.log(\"TriggerHandler : Setting up Interval Trigger Handlers.\") : '';\n        TriggerManager.triggerInterval = setInterval(TriggerManager.processIntervalTriggers, 1000);\n      }\n    }\n  }\n\n  static processIntervalTriggers() {\n    //if some survey is already running skip processing surveys for now?or queue it?.\n    let pathname = window.location.pathname;\n    if (pathname.match(/\\./)) {\n      pathname = pathname.substring(0, pathname.lastIndexOf('/'));\n    }\n    Cookie.set(Constants.CCTriggerPageElapsedTime + pathname, new Date(), undefined, undefined);\n    Cookie.set(Constants.CCTriggerSiteElapsedTime, new Date(), undefined, undefined);\n\n    for (let trigger in TriggerManager.triggerInstances) {\n      TriggerManager.triggerInstances[trigger].evaluateTriggers();\n      // TriggerManager.triggerInstances[trigger].processConditionalTriggers();\n    }\n  }\n\n\n  static processScrollTriggers(scrollY) {\n    for (let trigger in TriggerManager.triggerInstances) {\n      //process all scroll triggers.\n      TriggerManager.triggerInstances[trigger].evaluateTriggers();\n    }\n  }\n};\n\n\n\nexport { TriggerManager };","import { CCSDKConfig } from \"./interfaces/CCSDKConfig\";\nimport { Cookie } from \"./helpers/Cookie\";\nimport { Constants } from \"./Constants\";\nimport { TriggerUtils } from \"./helpers/TriggerUtils\";\n\nexport const SUPPORTED_TRIGGERS = [\n  \"click\",\n  \"waitSeconds\",\n  \"scrollPercent\",\n  \"grepURL\",\n  \"grepInvertURL\"\n];\n\nexport class WebSurveyTriggers {\n  config: CCSDKConfig;\n  evaluateCallBack: Function;\n  scrollTriggerPoint = 0;\n  constructor(config: CCSDKConfig) {\n    this.config = config;\n    if (this.config[\"scrollPercent\"]) {\n      this.scrollTriggerPoint =\n        (this.config[\"scrollPercent\"] *\n          (document.documentElement.scrollHeight ||\n            document.body.scrollHeight)) /\n        100;\n    }\n  }\n\n  evaluateTriggers() {\n    let showSurvey = true;\n\n    SUPPORTED_TRIGGERS.forEach((key) => {\n      if (this.config[key]) {\n        switch (key) {\n          case \"click\":\n            showSurvey =\n              showSurvey && (window as any).click >= this.config.click;\n            break;\n          case \"waitSeconds\":\n            // time spent on page\n            let pageStartTime = new Date(\n              Cookie.get(Constants.CCTriggerPageStartTime)\n            ).getTime();\n            let pathname = window.location.pathname;\n            if (pathname.match(/\\./)) {\n              pathname = pathname.substring(0, pathname.lastIndexOf(\"/\"));\n            }\n            let pageTime = new Date(\n              Cookie.get(Constants.CCTriggerPageElapsedTime + pathname)\n            ).getTime();\n            showSurvey =\n              showSurvey &&\n              TriggerUtils.checkTimeCondition(\n                pageTime,\n                pageStartTime,\n                this.config[key]\n              );\n            (window as any).ccsdkDebug\n              ? console.log(\"waitSeconds enabled\", showSurvey)\n              : \"\";\n            break;\n          case \"scrollPercent\":\n            //fill it with current scroll position\n            showSurvey =\n              showSurvey &&\n              TriggerUtils.checkScroll(\n                (window as any).ccsdkTopOffset,\n                this.scrollTriggerPoint\n              );\n            (window as any).ccsdkDebug\n              ? console.log(\"scrollPercent enabled\", showSurvey)\n              : \"\";\n\n            break;\n          case \"grepURL\":\n            showSurvey =\n              showSurvey && TriggerUtils.checkInUrl(this.config[key]);\n            (window as any).ccsdkDebug\n              ? console.log(\"grepURL enabled\", showSurvey)\n              : \"\";\n            break;\n          case \"grepInvertURL\":\n            showSurvey =\n              showSurvey && !TriggerUtils.checkInUrl(this.config[key]);\n            (window as any).ccsdkDebug\n              ? console.log(\"grepInvertURL enabled\", showSurvey)\n              : \"\";\n            break;\n        }\n      }\n    });\n\n    if (showSurvey) {\n      this.evaluateCallBack && this.evaluateCallBack();\n    }\n  }\n}\n","class TriggerUtils {\n  public static checkInUrl(inUrl: RegExp | string) {\n    return (\n      window.location.href.match(inUrl) != null &&\n      window.location.href.match(inUrl).length > 0\n    );\n  }\n\n  public static checkTimeCondition(\n    pageTime: number,\n    pageStartTime: number,\n    minPageTime: number\n  ) {\n    return Math.round((pageTime - pageStartTime) / 1000) > minPageTime;\n  }\n\n  public static checkScroll(scrollNow: number, minScrollPixels: number) {\n    return scrollNow > minScrollPixels;\n  }\n\n  public static checkPageCount(pageCount: number, minPageCount: number) {\n    return pageCount >= minPageCount;\n  }\n}\n\nexport { TriggerUtils };\n"],"sourceRoot":""}