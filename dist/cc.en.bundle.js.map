{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/helpers/Cookie.ts","webpack:///./src/Constants.ts","webpack:///./src/utils.ts","webpack:///./src/polyfills/ccsdk.polyfill.ts","webpack:///./src/CCSDKEntry.ts","webpack:///./src/SurveyManager.ts","webpack:///./src/WebSurvey.ts","webpack:///./src/WebSurveyHandler.ts","webpack:///./src/WebSurveyContainer.ts","webpack:///./src/global.scss?46dc","webpack:///./src/global.scss","webpack:///./node_modules/rtl-css-loader/lib/css-base.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./src/TriggerManager.ts","webpack:///./src/WebSurveyTriggers.ts","webpack:///./src/helpers/TriggerUtils.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Cookie","set","days","path","date","Date","setTime","getTime","expires","toUTCString","dir","document","cookie","nameEQ","ca","split","length","charAt","substring","indexOf","delete","undefined","getParameterByName","url","window","location","href","replace","results","RegExp","exec","decodeURIComponent","Constants","CCTriggerPageStartTime","CCTriggerPageElapsedTime","CCTriggerSiteStartTime","CCTriggerSiteElapsedTime","CCTriggerSitePageViewCount","CCTriggerIndividualPageViewCount","SURVEY_IMPRESSION_EVENT","SURVEY_START_EVENT","SURVEY_DATA_EVENT","SURVEY_END_EVENT","SURVEY_CLOSE_EVENT","SURVEY_QUESTION_EVENT","SURVEY_ANSWER_EVENT","SURVEY_CLICK_EVENT","GRANT_TYPE","AUTHORIZATION","AUTHORIZATION_BEARER","SURVEY_CLIENT","DEFAULT_PREFILL_QUEUE","DIRECT","BY_TAG","BY_NOTE","triggerEvent","el","eventName","data","CustomEvent","event","detail","createEvent","initCustomEvent","dispatchEvent","type","payload","bubbles","cancelable","querySelector","toStr","isCallable","maxSafeInteger","toLength","Array","from","toString","fn","Math","pow","len","number","Number","isNaN","isFinite","floor","abs","toInteger","min","max","arrayLike","items","TypeError","T","mapFn","arguments","kValue","A","this","k","params","evt","Event","find","predicate","thisArg","configurable","writable","localCCSDK","Cookie_1","SurveyManager_1","WebSurvey_1","TriggerManager_1","WebSurveyTriggers_1","Constants_1","setUpEnv","init","destroy","trigger","hide","show","on","prefill","prefillByTag","prefillByNote","CCSDK","queue","q","ccsdkDebug","console","log","args","functionName","splice","apply","_i","queue_1","eventCCReady","initEvent","surveyToken","trim","config","isActive","SurveyManager","surveyInstances","addSurvey","WebSurvey","TriggerManager","triggerInstances","WebSurveyTriggers","trackEvent","enqueueSurvey","setUpCallBack","prefillQueue","object_1","tracking","token","action","keys","forEach","x","addSurveyToQueue","isMobile","target","callback","savePrefillAsObject","restArgs","_a","push","globalSurveyRunning","innerWidth","initializeSurvey","surveyId","setupSurvey","info","tokenId","page","surveyInstance","processQueueInterval","setInterval","processQueueIntervalCB","surveyQueue","pop","setTimeout","destroyIntervals","clearInterval","setSurveyRunning","globalSurveyStartTime","unsetSurveyRunning","WebSurveyHandler_1","utils_1","handler","WebSurveyHandler","getCoolDown","getTokenAnswered","container","browserNotSuitable","setCoolDownPeriod","_this","survey","setTriggers","addEventListener","e","cb","WebSurveyContainer_1","_hideCloseButton","WebSurveyContainer","hideCloseButton","closeCallback","open","setSource","getUrl","close","isMicroSurveyForMobile","campaign","coolDownPeriod","bringSurveyIntoView","_iframeOpened","restrictedOrigin","readyForPrefills","_prefills","getSurvey","iframe","iframeContainer","listenForMessages","getIframe","getIframeContainer","appendChild","onwheel","ev","stopPropagation","onresize","resizeSurvey","closeButton","style","bottom","clientHeight","postIfMicrosurveyOnMobile","message","JSON","stringify","contentWindow","postMessage","createElement","classList","add","transform","border","borderColor","brandColor","getCloseButton","iframeHeight","button","backgroundColor","innerHTML","visibility","removeChild","body","err","error","pageLoad","src","urlSource","that","onload","websurveyConfigCallBack","parse","pagedLayout","setConfig","removeEventListener","options","screenWidth","screenHeight","innerHeight","attachIframe","pollForPageLoad","scaleFactor","getScaleFactor","height","postPrefillsToSurvey","eventType","response","START","ANSWERED","DATA","END","QUESTION","remove","prefills","prefillType","content","locals","getElementsByTagName","getAttribute","list","result","item","join","mediaQuery","alreadyImportedModules","id","memo","stylesInDom","isOldIE","all","atob","getElement","selector","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","sourceMap","insertStyleElement","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","firstChild","removeStyleElement","parentNode","idx","createStyleElement","attrs","addAttrs","setAttribute","obj","update","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","btoa","link","rel","createLinkElement","autoFixUrls","convertToAbsoluteUrls","unescape","encodeURIComponent","blob","oldSrc","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","cssNode","childNodes","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","$1","test","sitePageViewCount","parseInt","match","lastIndexOf","individualPageViewCount","click","onscroll","doc","documentElement","top","pageXOffset","scrollLeft","clientLeft","pageYOffset","scrollTop","clientTop","ccsdkTopOffset","processScrollTriggers","onclick","evaluateCallBack","triggerInterval","processIntervalTriggers","evaluateTriggers","scrollY","TriggerUtils_1","SUPPORTED_TRIGGERS","scrollTriggerPoint","scrollHeight","showSurvey","pageStartTime","pageTime","TriggerUtils","checkTimeCondition","checkScroll","checkInUrl","inUrl","minPageTime","round","scrollNow","minScrollPixels","checkPageCount","pageCount","minPageCount"],"mappings":"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","file":"cc.en.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","class Cookie {\r\n    /**\r\n     * Set/Overwrite a cookie value\r\n     *\r\n     * @param name\r\n     * @param value\r\n     * @param days      OPTIONAL Days till this cookie will stay valid. Default is current session\r\n     * @param path      OPTIONAL domain root will be used by default\r\n     */\r\n    static set(name : any, value : any, days : any, path : any) {\r\n      if (days) {\r\n          var date = new Date();\r\n              date.setTime(date.getTime()+(days*24*60*60*1000));\r\n          var expires = \"; expires=\"+date.toUTCString();\r\n      } else var expires = \"\";\r\n\r\n      var dir = path || '/';\r\n      document.cookie = name+\"=\"+value+expires+\"; path=\"+dir;\r\n  }\r\n\r\n  /**\r\n   * Retrieve a cookie value\r\n   *\r\n   * @param name\r\n   * @return String|null\r\n   */\r\n  static get(name) {\r\n      var nameEQ = name + \"=\";\r\n      var ca = document.cookie.split(';');\r\n      for(var i=0;i < ca.length;i++) {\r\n          var c = ca[i];\r\n          while (c.charAt(0)==' ') c = c.substring(1,c.length);\r\n          if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\r\n      }\r\n      return null;\r\n  }\r\n\r\n  /**\r\n   * Remove a cookie\r\n   *\r\n   * @param name\r\n   */\r\n  static delete(name) {\r\n    Cookie.set(name,\"\",-1, undefined);\r\n  }\r\n\r\n  static getParameterByName(name : string, url : any) {\r\n    if (!url) url = window.location.href;\r\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\r\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\r\n        results = regex.exec(url);\r\n    if (!results) return null;\r\n    if (!results[2]) return '';\r\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\r\n  }\r\n}\r\n\r\nexport { Cookie };\r\n","class Constants {\r\n  static CCTriggerPageStartTime = \"cc-trigger-page-start-time\";\r\n  static CCTriggerPageElapsedTime = \"cc-trigger-page-elapsed-time\";\r\n  static CCTriggerSiteStartTime = \"cc-trigger-site-start-time\";\r\n  static CCTriggerSiteElapsedTime = \"cc-trigger-site-elapsed-time\";\r\n  static CCTriggerSitePageViewCount = \"cc-trigger-site-page-count\";\r\n  static CCTriggerIndividualPageViewCount = \"cc-trigger-individual-page-count\";\r\n  static SURVEY_IMPRESSION_EVENT = \"onImpression\";\r\n  static SURVEY_START_EVENT = \"onStart\";\r\n  static SURVEY_DATA_EVENT = \"onData\";\r\n  static SURVEY_END_EVENT = \"onEnd\";\r\n  static SURVEY_CLOSE_EVENT = \"onClose\";\r\n  static SURVEY_QUESTION_EVENT = \"onQuestion\";\r\n  static SURVEY_ANSWER_EVENT = \"onAnswer\";\r\n  static SURVEY_CLICK_EVENT = \"onClick\";\r\n  static GRANT_TYPE = \"password\";\r\n  static AUTHORIZATION = \"Authorization\";\r\n  static AUTHORIZATION_BEARER = \"Bearer\";\r\n  static SURVEY_CLIENT = \"JS-MicroWeb\";\r\n}\r\n\r\nexport const DEFAULT_PREFILL_QUEUE = {\r\n  DIRECT: [],\r\n  BY_TAG: [],\r\n  BY_NOTE: []\r\n};\r\n\r\nexport { Constants };\r\n","export function triggerEvent(el: any, eventName: string, data: Object) {\r\n  if (typeof CustomEvent === \"function\") {\r\n    var event = <any>new CustomEvent(eventName, { detail: data });\r\n  } else {\r\n    var event = <any>document.createEvent(\"CustomEvent\");\r\n    event.initCustomEvent(eventName, true, true, data);\r\n  }\r\n\r\n  el.dispatchEvent(event);\r\n}\r\n\r\nexport function dispatchEvent(type, payload) {\r\n  let event = new CustomEvent(type, {\r\n    detail: payload,\r\n    bubbles: true,\r\n    cancelable: false\r\n  });\r\n  let iframe = document.querySelector(\".ccsdk.ifrcntr\");\r\n\r\n  (iframe || document).dispatchEvent(event);\r\n}\r\n","// Production steps of ECMA-262, Edition 6, 22.1.2.1\r\nif (!(<any>Array).from) {\r\n  (<any>Array).from = (function () {\r\n    var toStr = Object.prototype.toString;\r\n    var isCallable = function (fn) {\r\n      return typeof fn === 'function' || toStr.call(fn) === '[object Function]';\r\n    };\r\n    var toInteger = function (value) {\r\n      var number = Number(value);\r\n      if (isNaN(number)) {\r\n        return 0;\r\n      }\r\n      if (number === 0 || !isFinite(number)) {\r\n        return number;\r\n      }\r\n      return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\r\n    };\r\n    var maxSafeInteger = Math.pow(2, 53) - 1;\r\n    var toLength = function (value) {\r\n      var len = toInteger(value);\r\n      return Math.min(Math.max(len, 0), maxSafeInteger);\r\n    };\r\n\r\n    // The length property of the from method is 1.\r\n    return function from(arrayLike /*, mapFn, thisArg */) {\r\n      // 1. Let C be the this value.\r\n      var C = this;\r\n\r\n      // 2. Let items be ToObject(arrayLike).\r\n      var items = Object(arrayLike);\r\n\r\n      // 3. ReturnIfAbrupt(items).\r\n      if (arrayLike == null) {\r\n        throw new TypeError('Array.from requires an array-like object - not null or undefined');\r\n      }\r\n\r\n      // 4. If mapfn is undefined, then let mapping be false.\r\n      var mapFn = arguments.length > 1 ? arguments[1] : void undefined;\r\n      var T;\r\n      if (typeof mapFn !== 'undefined') {\r\n        // 5. else\r\n        // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.\r\n        if (!isCallable(mapFn)) {\r\n          throw new TypeError('Array.from: when provided, the second argument must be a function');\r\n        }\r\n\r\n        // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.\r\n        if (arguments.length > 2) {\r\n          T = arguments[2];\r\n        }\r\n      }\r\n\r\n      // 10. Let lenValue be Get(items, \"length\").\r\n      // 11. Let len be ToLength(lenValue).\r\n      var len = toLength(items.length);\r\n\r\n      // 13. If IsConstructor(C) is true, then\r\n      // 13. a. Let A be the result of calling the [[Construct]] internal method \r\n      // of C with an argument list containing the single item len.\r\n      // 14. a. Else, Let A be ArrayCreate(len).\r\n      var A = isCallable(C) ? Object(new C(len)) : new Array(len);\r\n\r\n      // 16. Let k be 0.\r\n      var k = 0;\r\n      // 17. Repeat, while k < len… (also steps a - h)\r\n      var kValue;\r\n      while (k < len) {\r\n        kValue = items[k];\r\n        if (mapFn) {\r\n          A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);\r\n        } else {\r\n          A[k] = kValue;\r\n        }\r\n        k += 1;\r\n      }\r\n      // 18. Let putStatus be Put(A, \"length\", len, true).\r\n      A.length = len;\r\n      // 20. Return A.\r\n      return A;\r\n    };\r\n  }());\r\n}\r\n\r\n// custom event polyfill\r\n(function () {\r\n\r\n  if (typeof (<any>window).CustomEvent === \"function\") return false;\r\n\r\n  function CustomEvent(event, params) {\r\n    params = params || {\r\n      bubbles: false,\r\n      cancelable: false,\r\n      detail: undefined\r\n    };\r\n    var evt = document.createEvent('CustomEvent');\r\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\r\n    return evt;\r\n  }\r\n\r\n  CustomEvent.prototype = (<any>window).Event.prototype;\r\n\r\n  (<any>window).CustomEvent = CustomEvent;\r\n})();\r\n\r\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\r\nif (!(<any>Array.prototype).find) {\r\n  Object.defineProperty(Array.prototype, 'find', {\r\n    value: function (predicate) {\r\n      // 1. Let O be ? ToObject(this value).\r\n      if (this == null) {\r\n        throw new TypeError('\"this\" is null or not defined');\r\n      }\r\n\r\n      var o = Object(this);\r\n\r\n      // 2. Let len be ? ToLength(? Get(O, \"length\")).\r\n      var len = o.length >>> 0;\r\n\r\n      // 3. If IsCallable(predicate) is false, throw a TypeError exception.\r\n      if (typeof predicate !== 'function') {\r\n        throw new TypeError('predicate must be a function');\r\n      }\r\n\r\n      // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\r\n      var thisArg = arguments[1];\r\n\r\n      // 5. Let k be 0.\r\n      var k = 0;\r\n\r\n      // 6. Repeat, while k < len\r\n      while (k < len) {\r\n        // a. Let Pk be ! ToString(k).\r\n        // b. Let kValue be ? Get(O, Pk).\r\n        // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\r\n        // d. If testResult is true, return kValue.\r\n        var kValue = o[k];\r\n        if (predicate.call(thisArg, kValue, k, o)) {\r\n          return kValue;\r\n        }\r\n        // e. Increase k by 1.\r\n        k++;\r\n      }\r\n\r\n      // 7. Return undefined.\r\n      return undefined;\r\n    },\r\n    configurable: true,\r\n    writable: true\r\n  });\r\n}","import { Cookie } from \"./helpers/Cookie\";\r\nimport { SurveyManager } from \"./SurveyManager\";\r\nimport { PrefillsBatchOrSingle } from \"./types\";\r\nimport { WebSurvey } from \"./WebSurvey\";\r\nimport { TriggerManager } from \"./TriggerManager\";\r\nimport { WebSurveyTriggers } from \"./WebSurveyTriggers\";\r\nimport { DEFAULT_PREFILL_QUEUE } from \"./Constants\";\r\n\r\n/**\r\n * functions that are exposed to SDK User are written here.\r\n * Entry point for CCSDK.\r\n */\r\n// declare var Sentry: any;\r\n\r\nlet localCCSDK;\r\n\r\n// let instances : any = {};\r\n\r\n(window as any).globalSurveyRunning = false;\r\n(window as any).ccsdkDebug = false;\r\n(window as any).isMobile = window.innerWidth <= 768 ? true : false;\r\n\r\nexport function setUpEnv() {\r\n  localCCSDK = {\r\n    init: init,\r\n    destroy: destroy,\r\n    trigger: trigger,\r\n    hide: hide,\r\n    show: show,\r\n    on: on,\r\n    prefill: prefill,\r\n    prefillByTag: prefillByTag,\r\n    prefillByNote: prefillByNote\r\n  };\r\n\r\n  if (typeof (window as any).CCSDK !== \"undefined\") {\r\n    var queue = (window as any).CCSDK.q;\r\n    (window as any).CCSDK = function () {\r\n      if (arguments && arguments.length == 0) {\r\n        var time = new Date();\r\n      } else {\r\n        (window as any).ccsdkDebug ? console.log(arguments) : \"\";\r\n        var args = (Array as any).from(arguments);\r\n        //Call this functions as ccsdk('functionName', ['argument1', 'argument2']);\r\n        var functionName = args.splice(0, 1)[0];\r\n        (window as any).ccsdkDebug ? console.log(functionName) : \"\";\r\n        return localCCSDK[functionName].apply(this, args);\r\n      }\r\n    };\r\n    if (queue) {\r\n      for (var q of queue) {\r\n        var args = (Array as any).from(q);\r\n        var functionName = args.splice(0, 1)[0];\r\n        localCCSDK[functionName].apply(this, args);\r\n      }\r\n    }\r\n    let eventCCReady: Event = document.createEvent(\"Event\");\r\n    eventCCReady.initEvent(\"ccready\", true, true);\r\n    document.dispatchEvent(eventCCReady);\r\n  }\r\n}\r\n\r\nsetUpEnv();\r\n\r\nexport function init(surveyToken: any) {\r\n  let isV2 = true;\r\n  //config options can be set in arguments[1]\r\n  //available config options : themeColor\r\n  surveyToken = decodeURIComponent(surveyToken).trim();\r\n  let config = typeof arguments[1] === \"object\" ? arguments[1] : {};\r\n  //create survey instance\r\n  if (\r\n    typeof Cookie.get(surveyToken + \"-finish\") !== \"undefined\" &&\r\n    Cookie.get(surveyToken + \"-finish\")\r\n  ) {\r\n    return;\r\n  }\r\n  if (\r\n    typeof Cookie.get(surveyToken + \"-coolDown\") !== \"undefined\" &&\r\n    Cookie.get(surveyToken + \"-coolDown\")\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  if (typeof config.isActive !== \"undefined\" && config.isActive) {\r\n    if (!SurveyManager.surveyInstances[surveyToken]) {\r\n      // Add survey to instances list\r\n      SurveyManager.addSurvey(surveyToken, new WebSurvey(surveyToken, config));\r\n    }\r\n\r\n    if (!TriggerManager.triggerInstances[surveyToken]) {\r\n      // add trigger to instances list\r\n      TriggerManager.addSurvey(surveyToken, new WebSurveyTriggers(config));\r\n    }\r\n\r\n    trackEvent(surveyToken);\r\n\r\n    if (!TriggerManager.enqueueSurvey) {\r\n      setUpCallBack();\r\n    }\r\n\r\n    if (SurveyManager.prefillQueue[surveyToken]) {\r\n      let object = SurveyManager.prefillQueue[surveyToken];\r\n      SurveyManager.surveyInstances[surveyToken].tracking.trackEvent(\r\n        \"Init MicroSurvey\",\r\n        {\r\n          token: surveyToken,\r\n          data: {\r\n            name: \"Prefill lazily\",\r\n            action: surveyToken\r\n          }\r\n        },\r\n        null,\r\n        null\r\n      );\r\n\r\n      Object.keys(DEFAULT_PREFILL_QUEUE).forEach((x) => {\r\n        if (object[x] && object[x].length > 0) {\r\n          SurveyManager.surveyInstances[surveyToken].prefill(object, x);\r\n        }\r\n      });\r\n\r\n      delete SurveyManager.prefillQueue[surveyToken];\r\n      // if (object.directPrefills) {\r\n      //   object.directPrefills.forEach(x => {\r\n\r\n      //   });\r\n      //   delete object.directPrefills;\r\n      // } else if (object.byTagPrefills) {\r\n      //   object.byTagPrefills.forEach(x => {\r\n      //     SurveyManager.surveyInstances[surveyToken].prefill(x, 'BY_TAG');\r\n      //   });\r\n      //   delete object.byTagPrefills;\r\n      // } else if (object.byNotePrefills) {\r\n      //   object.byTagPrefills.forEach(x => {\r\n      //     SurveyManager.surveyInstances[surveyToken].prefill(x, 'BY_NOTE');\r\n      //   });\r\n      //   delete object.byNotePrefills;\r\n      // }\r\n    }\r\n    return SurveyManager.surveyInstances[surveyToken];\r\n  } else {\r\n    //do nothing\r\n  }\r\n}\r\n\r\nexport function setUpCallBack() {\r\n  TriggerManager.enqueueSurvey = (token) => {\r\n    SurveyManager.addSurveyToQueue(token);\r\n  };\r\n}\r\n\r\nexport function trackEvent(surveyToken: any) {\r\n  SurveyManager.surveyInstances[surveyToken].tracking.trackEvent(\r\n    \"Init MicroSurvey\",\r\n    {\r\n      token: surveyToken,\r\n      data: {\r\n        name: (<any>window).isMobile ? \"Mobile Mode\" : \"Desktop Mode\",\r\n        action: surveyToken\r\n      }\r\n    },\r\n    null,\r\n    null\r\n  );\r\n}\r\n\r\nexport function destroy(surveyToken: string) {\r\n  //remove from trigger manager, delete instance.\r\n  SurveyManager.destroy(surveyToken);\r\n  TriggerManager;\r\n}\r\n//\r\nexport function trigger(surveyToken: string, type: string, target: string) {\r\n  (window as any).ccsdkDebug ? console.log(SurveyManager.surveyInstances) : \"\";\r\n\r\n  if (typeof SurveyManager.surveyInstances[surveyToken] != \"undefined\") {\r\n    SurveyManager.surveyInstances[surveyToken].tracking.trackEvent(\r\n      \"Trigger Type\",\r\n      {\r\n        token: surveyToken,\r\n        data: {\r\n          name: type,\r\n          action: surveyToken\r\n        }\r\n      },\r\n      null,\r\n      null\r\n    );\r\n    SurveyManager.surveyInstances[surveyToken].trigger(type, target);\r\n  }\r\n  //tell trigger manager to register trigger.\r\n}\r\n\r\nexport function on(surveyToken: string, type: string, callback: any) {\r\n  if (typeof SurveyManager.surveyInstances[surveyToken] != \"undefined\") {\r\n    SurveyManager.surveyInstances[surveyToken].tracking.trackEvent(\r\n      \"Event Listeners\",\r\n      {\r\n        token: surveyToken,\r\n        data: {\r\n          name: type,\r\n          action: surveyToken\r\n        }\r\n      },\r\n      null,\r\n      null\r\n    );\r\n    SurveyManager.surveyInstances[surveyToken].on(type, callback);\r\n  }\r\n}\r\n\r\nfunction savePrefillAsObject(surveyToken, restArgs, type) {\r\n  let prefill;\r\n  if (typeof restArgs[0] === \"string\") {\r\n    prefill = { [restArgs[0]]: restArgs[1] };\r\n  } else {\r\n    prefill = restArgs[0];\r\n  }\r\n  if (\r\n    typeof SurveyManager.surveyInstances[surveyToken] != \"undefined\" &&\r\n    restArgs[0]\r\n  ) {\r\n    SurveyManager.surveyInstances[surveyToken].prefill(prefill, type);\r\n  } else {\r\n    if (!SurveyManager.prefillQueue[surveyToken]) {\r\n      SurveyManager.prefillQueue[surveyToken] = {\r\n        DIRECT: [],\r\n        BY_TAG: [],\r\n        BY_NOTE: []\r\n      };\r\n    }\r\n    SurveyManager.prefillQueue[surveyToken][type].push(prefill);\r\n  }\r\n}\r\n\r\nexport function prefill(\r\n  surveyToken: string,\r\n  ...restArgs: PrefillsBatchOrSingle\r\n) {\r\n  savePrefillAsObject(surveyToken, restArgs, \"DIRECT\");\r\n}\r\n\r\nexport function prefillByTag(\r\n  surveyToken: string,\r\n  ...restArgs: PrefillsBatchOrSingle\r\n) {\r\n  savePrefillAsObject(surveyToken, restArgs, \"BY_TAG\");\r\n}\r\n\r\nexport function prefillByNote(\r\n  surveyToken: string,\r\n  ...restArgs: PrefillsBatchOrSingle\r\n) {\r\n  savePrefillAsObject(surveyToken, restArgs, \"BY_NOTE\");\r\n}\r\n\r\nexport function show(surveyToken: string) {\r\n  if (typeof SurveyManager.surveyInstances[surveyToken] != \"undefined\") {\r\n    SurveyManager.surveyInstances[surveyToken].show();\r\n  }\r\n}\r\n\r\nexport function hide(surveyToken: string, callback) {\r\n  if (typeof SurveyManager.surveyInstances[surveyToken] != \"undefined\") {\r\n    SurveyManager.surveyInstances[surveyToken].hide(callback);\r\n  }\r\n}\r\n","//Survey Manager manages and queues survey.\r\n\r\nimport { TriggerManager } from \"./TriggerManager\";\r\nimport { WebSurvey } from \"./WebSurvey\";\r\nimport { PrefillType } from \"./types\";\r\nimport { Cookie } from \"./helpers/Cookie\";\r\n\r\nclass SurveyManager {\r\n  static surveyQueue: any = [];\r\n  static processQueueInterval: any = null;\r\n  static prefillQueue: {\r\n    [surveyToken: string]: {\r\n      [k in PrefillType]: any;\r\n    };\r\n  } = {};\r\n  static surveyInstances: {\r\n    [key: string]: WebSurvey;\r\n  } = {};\r\n\r\n  static initializeSurvey(surveyId: string) {\r\n    //check if survey ran?\r\n    //do survey initialization.\r\n    if (\r\n      !SurveyManager.surveyInstances ||\r\n      !SurveyManager.surveyInstances[surveyId]\r\n    ) {\r\n      (<any>window).ccsdkDebug\r\n        ? console.info(\r\n            \"Microsurvey not properly set up. Contact Support.\",\r\n            { tokenId: surveyId },\r\n            {\r\n              page: window.location.href\r\n            }\r\n          )\r\n        : \"\";\r\n      return;\r\n    }\r\n\r\n    SurveyManager.surveyInstances[surveyId].setupSurvey();\r\n  }\r\n\r\n  static addSurvey(surveyId, surveyInstance) {\r\n    SurveyManager.surveyInstances[surveyId] = surveyInstance;\r\n\r\n    if (SurveyManager.processQueueInterval == null) {\r\n      SurveyManager.processQueueInterval = setInterval(\r\n        SurveyManager.processQueueIntervalCB,\r\n        100\r\n      );\r\n    }\r\n  }\r\n\r\n  static addSurveyToQueue(token) {\r\n    (window as any).ccsdkDebug\r\n      ? console.log(\"Adding survey ID : \" + token)\r\n      : \"\";\r\n    if (SurveyManager.surveyQueue.indexOf(token) === -1) {\r\n      if (\r\n        typeof Cookie.get(token + \"-finish\") !== \"undefined\" &&\r\n        Cookie.get(token + \"-finish\")\r\n      ) {\r\n        return;\r\n      }\r\n      if (\r\n        typeof Cookie.get(token + \"-coolDown\") !== \"undefined\" &&\r\n        Cookie.get(token + \"-coolDown\")\r\n      ) {\r\n        return;\r\n      }\r\n      SurveyManager.surveyQueue.push(token);\r\n    }\r\n  }\r\n\r\n  static processQueueIntervalCB() {\r\n    if ((window as any).globalSurveyRunning == true) {\r\n      return;\r\n    } else {\r\n      let surveyId = SurveyManager.surveyQueue.pop();\r\n      (window as any).ccsdkDebug\r\n        ? console.log(\"Processing survey ID \" + surveyId)\r\n        : \"\";\r\n      if (surveyId) {\r\n        SurveyManager.initializeSurvey(surveyId);\r\n      }\r\n    }\r\n  }\r\n\r\n  public static destroy(token) {\r\n    setTimeout(() => {\r\n      delete SurveyManager.surveyInstances[token];\r\n    }, 250);\r\n  }\r\n\r\n  static destroyIntervals() {\r\n    clearInterval(SurveyManager.processQueueInterval);\r\n    SurveyManager.processQueueInterval = null;\r\n  }\r\n\r\n  public static setSurveyRunning() {\r\n    (window as any).globalSurveyRunning = true;\r\n    (window as any).globalSurveyStartTime = new Date();\r\n  }\r\n\r\n  public static unsetSurveyRunning() {\r\n    (window as any).globalSurveyRunning = false;\r\n  }\r\n}\r\n\r\nexport { SurveyManager };\r\n","import { WebSurveyHandler } from \"./WebSurveyHandler\";\r\nimport { WebSurveyTriggers } from \"./WebSurveyTriggers\";\r\nimport { triggerEvent, dispatchEvent } from \"./utils\";\r\nimport { Constants } from \"./Constants\";\r\n\r\nexport class WebSurvey {\r\n  surveyToken: string;\r\n  config;\r\n  handler: WebSurveyHandler;\r\n\r\n  triggers: WebSurveyTriggers;\r\n  tracking = {\r\n    trackEvent: this.trackEvent\r\n  };\r\n  util: any;\r\n\r\n  constructor(token, config) {\r\n    this.surveyToken = token;\r\n    this.config = config;\r\n    this.handler = new WebSurveyHandler(this.surveyToken, config);\r\n\r\n    this.init();\r\n  }\r\n\r\n  setupSurvey() {\r\n    if (\r\n      !this.handler.getCoolDown(this.surveyToken) &&\r\n      !this.handler.getTokenAnswered(this.surveyToken) &&\r\n      !this.handler.container.browserNotSuitable\r\n    ) {\r\n      this.show();\r\n      this.handler.setCoolDownPeriod(this.config, this.surveyToken);\r\n    }\r\n  }\r\n\r\n  init() {\r\n    setTimeout(() => {\r\n      triggerEvent(document, this.surveyToken + \"-ready\", { survey: this });\r\n    }, 100);\r\n  }\r\n\r\n  setTriggers() {}\r\n\r\n  public trigger(...args) {}\r\n\r\n  public on(type, callback) {\r\n    document.addEventListener(type + \"-\" + this.surveyToken, function (e: any) {\r\n      callback(e.detail);\r\n    });\r\n  }\r\n\r\n  public prefill(object, type) {\r\n    this.handler.prefill(object, type);\r\n  }\r\n\r\n  show() {\r\n    this.handler.show();\r\n    dispatchEvent(\r\n      `${Constants.SURVEY_IMPRESSION_EVENT}-${this.surveyToken}`,\r\n      this.surveyToken\r\n    );\r\n  }\r\n\r\n  trackEvent(...args) {}\r\n\r\n  hide(cb) {\r\n    this.handler.hide();\r\n    if (cb) {\r\n      cb();\r\n    }\r\n  }\r\n}\r\n","import { WebSurveyContainer } from \"./WebSurveyContainer\";\r\nimport { Cookie } from \"./helpers/Cookie\";\r\nimport { dispatchEvent } from \"./utils\";\r\nimport { Constants } from \"./Constants\";\r\n\r\nexport class WebSurveyHandler {\r\n  // url = \"https://cx.getcloudcherry.com/perf-s1/#/login?token=\";\r\n  // url = \"https://cx.cloudcherry.com/ns/#/login?token=\";\r\n  // url = \"http://localhost:8100/#/login?token=\";\r\n  url =\r\n    \"https://cxnext.blob.core.windows.net/vinay/websurvey/index.html#/login?token=\";\r\n  token = \"mr-100550\";\r\n  container: WebSurveyContainer;\r\n  _hideCloseButton: boolean | null = null;\r\n  public set showCloseButton(value: boolean) {\r\n    this._hideCloseButton = value;\r\n    if (this.container) {\r\n      this.container.hideCloseButton = value;\r\n    }\r\n  }\r\n\r\n  config;\r\n\r\n  constructor(token, config) {\r\n    this.token = token;\r\n    this.config = config;\r\n    this.config.token = token;\r\n\r\n    this.container = new WebSurveyContainer(this.config);\r\n    if (this._hideCloseButton !== null) {\r\n      this.container.hideCloseButton = this._hideCloseButton;\r\n    }\r\n  }\r\n\r\n  show(token = this.token) {\r\n    this.container.closeCallback = (event: Event) => {\r\n      dispatchEvent(\r\n        `${Constants.SURVEY_CLOSE_EVENT}-${this.token}`,\r\n        this.token\r\n      );\r\n    };\r\n\r\n    this.container.open();\r\n    this.container.setSource(this.getUrl(token || this.token));\r\n  }\r\n\r\n  hide() {\r\n    this.container.close();\r\n  }\r\n\r\n  getUrl(token: string): string {\r\n    const isMicroSurveyForMobile = window.innerWidth <= 768;\r\n    return `${this.url}${token}&mode=microsurvey&ismicrosurveyformobile=${isMicroSurveyForMobile}`;\r\n  }\r\n\r\n  setCoolDownPeriod(campaign, surveyToken) {\r\n    if (campaign && campaign.coolDownPeriod && campaign.coolDownPeriod != 0) {\r\n      Cookie.set(\r\n        surveyToken + \"-coolDown\",\r\n        \"true\",\r\n        campaign.coolDownPeriod / 86400,\r\n        \"/\"\r\n      );\r\n    } else {\r\n      Cookie.set(surveyToken + \"-coolDown\", \"true\", 1, \"/\");\r\n    }\r\n  }\r\n\r\n  getCoolDown(surveyToken) {\r\n    return Cookie.get(surveyToken + \"-coolDown\");\r\n  }\r\n\r\n  getTokenAnswered(surveyToken) {\r\n    return Cookie.get(surveyToken);\r\n  }\r\n\r\n  public prefill(object, type) {\r\n    this.container.prefill(object, type);\r\n  }\r\n}\r\n","import \"./global.scss\";\r\nimport { dispatchEvent } from \"./utils\";\r\nimport { Constants } from \"./Constants\";\r\nimport { Cookie } from \"./helpers/Cookie\";\r\n\r\nexport class WebSurveyContainer {\r\n  public iframe: HTMLIFrameElement;\r\n  public iframeContainer: HTMLDivElement;\r\n  public hideCloseButton = false;\r\n  public closeCallback: Function | null = null;\r\n  urlSource;\r\n  bringSurveyIntoView = false;\r\n\r\n  _iframeOpened: boolean | null = null;\r\n  restrictedOrigin = \"*\";\r\n  config;\r\n  public browserNotSuitable = false;\r\n  readyForPrefills = false;\r\n  _prefills = [];\r\n  pageLoad: boolean;\r\n  closeButton: HTMLButtonElement;\r\n\r\n  constructor(config) {\r\n    this.config = config;\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    [this.iframe, this.iframeContainer] = this.getSurvey();\r\n    this.listenForMessages();\r\n  }\r\n\r\n  getSurvey(): [HTMLIFrameElement, HTMLDivElement] {\r\n    let iframe = this.getIframe();\r\n    let iframeContainer = this.getIframeContainer();\r\n\r\n    iframeContainer.appendChild(iframe);\r\n\r\n    iframeContainer.onwheel = (ev) => {\r\n      ev.stopPropagation();\r\n    };\r\n\r\n    window.onresize = (ev) => {\r\n      this.resizeSurvey();\r\n\r\n      if (!this.closeButton) {\r\n        return;\r\n      }\r\n\r\n      if (window.innerWidth > 768) {\r\n        this.closeButton.style.bottom = `${\r\n          this.iframeContainer.clientHeight - 14\r\n        }px`;\r\n        this.postIfMicrosurveyOnMobile(false);\r\n      } else {\r\n        this.closeButton.style.bottom = `${\r\n          this.iframeContainer.clientHeight - 48\r\n        }px`;\r\n        this.postIfMicrosurveyOnMobile(true);\r\n      }\r\n    };\r\n    return [iframe, iframeContainer];\r\n  }\r\n\r\n  postIfMicrosurveyOnMobile(isMobile) {\r\n    let message = JSON.stringify({\r\n      type: \"IS_MS_MOBILE\",\r\n      data: isMobile,\r\n    });\r\n\r\n    this.iframe.contentWindow.postMessage(message, this.restrictedOrigin);\r\n  }\r\n\r\n  getIframeContainer(): HTMLDivElement {\r\n    let iframeContainer = document.createElement(\"div\");\r\n    iframeContainer.classList.add(\"ccsdk\");\r\n    iframeContainer.classList.add(\"ifr-cntr\");\r\n    iframeContainer.style.transform = \"translateY(100vh)\";\r\n    return iframeContainer;\r\n  }\r\n\r\n  getIframe(): HTMLIFrameElement {\r\n    let iframe = document.createElement(\"iframe\");\r\n    iframe.classList.add(\"ifr\");\r\n    iframe.style.border = \"0\";\r\n    iframe.style.borderColor = this.config.brandColor;\r\n    return iframe;\r\n  }\r\n\r\n  getCloseButton(iframeHeight: number) {\r\n    let button = document.createElement(\"button\");\r\n    button.style.backgroundColor = this.config.brandColor;\r\n    button.innerHTML =\r\n      '<img src=\"https://cxnext.blob.core.windows.net/venki/times.png\" class=\"close-icon\">';\r\n\r\n    if (window.innerWidth > 768) {\r\n      button.style.bottom = `${iframeHeight - 14}px`;\r\n    } else {\r\n      button.style.bottom = `${iframeHeight - 48}px`;\r\n    }\r\n\r\n    button.addEventListener(\"click\", (event) => {\r\n      if (this.closeCallback) {\r\n        this.closeCallback(event);\r\n      }\r\n      button.style.visibility = \"hidden\";\r\n      this.close();\r\n    });\r\n\r\n    return button;\r\n  }\r\n\r\n  public close() {\r\n    if (!this.iframeContainer) {\r\n      return;\r\n    }\r\n\r\n    (<any>window).globalSurveyRunning = false;\r\n    this.bringSurveyIntoView = false;\r\n    this.resizeSurvey();\r\n    this._iframeOpened = false;\r\n    this.iframeContainer.style.transform = \"translateY(100vh)\";\r\n    setTimeout(() => {\r\n      this.destroy();\r\n    }, 250);\r\n  }\r\n\r\n  destroy() {\r\n    try {\r\n      this.iframeContainer.removeChild(this.iframe);\r\n      this.iframe = null;\r\n      document.body.removeChild(this.iframeContainer);\r\n      this.iframeContainer = null;\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n    this.pageLoad = false;\r\n  }\r\n\r\n  public setSource(url: string) {\r\n    if (!this.iframe) {\r\n      return;\r\n    }\r\n\r\n    this.iframe.src = url;\r\n    this.urlSource = url;\r\n    let that = this;\r\n\r\n    this.iframe.onload = () => {\r\n      console.info(\"Iframe loaded. Ready for showing to user.\");\r\n      this.pageLoad = true;\r\n    };\r\n\r\n    function websurveyConfigCallBack(event) {\r\n      if (event.data) {\r\n        try {\r\n          let message = JSON.parse(event.data);\r\n          if (\r\n            message &&\r\n            message.type === \"GET_CONFIG\" &&\r\n            message.token === that.config.token\r\n          ) {\r\n            that.config.pagedLayout = false;\r\n            that.setConfig(that.config);\r\n            window.removeEventListener(\"message\", websurveyConfigCallBack);\r\n          }\r\n        } catch (err) {\r\n          console.log(err);\r\n        }\r\n      }\r\n    }\r\n\r\n    window.addEventListener(\"message\", websurveyConfigCallBack);\r\n  }\r\n\r\n  public setConfig(config) {\r\n    let message = JSON.stringify({\r\n      config,\r\n      options: {\r\n        screenWidth: window.innerWidth,\r\n        screenHeight: window.innerHeight,\r\n      },\r\n      mode: \"MICROSURVEY\",\r\n    });\r\n\r\n    this.iframe.contentWindow.postMessage(message, this.restrictedOrigin);\r\n  }\r\n\r\n  open() {\r\n    if (this.browserNotSuitable) {\r\n      console.info(\r\n        \"Cookie and Storage not accessible for survey. Survey will not show up.\"\r\n      );\r\n      return;\r\n    }\r\n    (<any>window).globalSurveyRunning = true;\r\n    if (!this.iframeContainer || !this.iframe) {\r\n      this.init();\r\n      this.attachIframe();\r\n      this.setConfig(this.urlSource);\r\n    } else {\r\n      this.attachIframe();\r\n    }\r\n  }\r\n\r\n  attachIframe() {\r\n    document.body.appendChild(this.iframeContainer);\r\n    let that = this;\r\n    function pollForPageLoad() {\r\n      if (that.pageLoad) {\r\n        that.bringSurveyIntoView = true;\r\n        that.resizeSurvey();\r\n      } else {\r\n        setTimeout(() => {\r\n          pollForPageLoad();\r\n        }, 150);\r\n      }\r\n    }\r\n\r\n    // poll for page load\r\n    pollForPageLoad();\r\n\r\n    this._iframeOpened = true;\r\n    if (!this.hideCloseButton) {\r\n      let scaleFactor = 1; // 0.66;\r\n      this.resizeSurvey();\r\n      this.closeButton = this.getCloseButton(\r\n        this.iframe.clientHeight * scaleFactor\r\n      );\r\n      this.closeButton.classList.add(\"close-btn\");\r\n      this.iframeContainer.appendChild(this.closeButton);\r\n    }\r\n  }\r\n\r\n  resizeSurvey() {\r\n    let scaleFactor = this.getScaleFactor();\r\n\r\n    let transform = !this.bringSurveyIntoView\r\n      ? \"translateY(100vh)\"\r\n      : \"translateY(0)\";\r\n\r\n    this.iframeContainer.style.transform = `${transform} scale(${scaleFactor})`;\r\n  }\r\n\r\n  getScaleFactor() {\r\n    let height = window.innerHeight;\r\n    let width = window.innerWidth;\r\n\r\n    if (width <= 768) {\r\n      return 1;\r\n      // mobile\r\n    }\r\n\r\n    // large screens\r\n    if (height > 768) {\r\n      return 1;\r\n    }\r\n\r\n    // medium screens\r\n    if (height <= 768 && height > 701) {\r\n      return 0.9;\r\n    }\r\n\r\n    // small screens\r\n    if (height <= 700) {\r\n      return 0.8;\r\n    }\r\n  }\r\n\r\n  listenForMessages() {\r\n    var that = this;\r\n    window.addEventListener(\"message\", (ev) => {\r\n      if (ev.data) {\r\n        try {\r\n          let message = JSON.parse(ev.data);\r\n          if (message.type === \"READY_FOR_PREFILLS\") {\r\n            that.readyForPrefills = true;\r\n            if (that._prefills.length > 0) {\r\n              that._prefills.forEach((x: [any, any]) => {\r\n                that.postPrefillsToSurvey(x[0], x[1]);\r\n              });\r\n            }\r\n          } else if (message.type === \"STORAGE_EXCEPTION\") {\r\n            that._iframeOpened = false;\r\n            that.close();\r\n            that.browserNotSuitable = true;\r\n            console.info(\"Storage exception within iframe\");\r\n          } else if (message.type === \"REDIRECT_TO_FALLBACK\") {\r\n            that.setConfig(that.config);\r\n            that.readyForPrefills = false;\r\n          } else if (message.type === \"EVENT_FROM_SURVEY\") {\r\n            let eventTypeMap = {\r\n              START: \"onStart\",\r\n              ANSWERED: \"onAnswer\",\r\n              DATA: \"onData\",\r\n              END: \"onEnd\",\r\n              QUESTION: \"onQuestion\",\r\n            };\r\n\r\n            if (message.data.eventType === \"END\") {\r\n              if (\r\n                message.data.response !== null &&\r\n                message.data.response.token === that.config.token\r\n              ) {\r\n                setTimeout(() => {\r\n                  that.close();\r\n                  // websurvey sets the cookie in the iframe and not in the parent page\r\n                  //set done cookie for 30 days.\r\n                  Cookie.set(that.config.token + \"-finish\", \"true\", 30, \"/\");\r\n                  dispatchEvent(\r\n                    `${Constants.SURVEY_CLOSE_EVENT}-${that.config.token}`,\r\n                    that.config.token\r\n                  );\r\n                }, 3000);\r\n\r\n                if (message.data.response.url) {\r\n                  // redirect url will be opened in new window\r\n                  window.open(message.data.response.url, \"_blank\");\r\n                }\r\n              }\r\n            }\r\n            dispatchEvent(\r\n              `${eventTypeMap[message.data.eventType]}-${that.config.token}`,\r\n              message.data.response\r\n            );\r\n          } else if (message.type === \"CURRENT_PAGE\") {\r\n            if (message.data === \"login\") {\r\n              that.iframeContainer.classList.add(\"at-login\");\r\n            } else {\r\n              that.iframeContainer.classList.remove(\"at-login\");\r\n            }\r\n          }\r\n        } catch (err) {}\r\n      }\r\n    });\r\n  }\r\n\r\n  public prefill(object, type) {\r\n    if (this.readyForPrefills && object) {\r\n      this.postPrefillsToSurvey(object, type);\r\n    } else {\r\n      this._prefills.push([object, type]);\r\n    }\r\n  }\r\n\r\n  postPrefillsToSurvey(prefills, type) {\r\n    let message = JSON.stringify({\r\n      prefills: prefills,\r\n      prefillType: type,\r\n      type: \"PREFILLS_FROM_HOST\",\r\n    });\r\n\r\n    this.iframe.contentWindow.postMessage(message, this.restrictedOrigin);\r\n  }\r\n}\r\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/rtl-css-loader/index.js!../node_modules/sass-loader/lib/loader.js!./global.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/rtl-css-loader/index.js!../node_modules/sass-loader/lib/loader.js!./global.scss\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/rtl-css-loader/index.js!../node_modules/sass-loader/lib/loader.js!./global.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../node_modules/rtl-css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, typeof document !== 'undefined' && document.getElementsByTagName('html')[0].getAttribute('dir') === 'rtl' ? \".ccsdk.ifr-cntr {\\n  z-index: 9999;\\n  transition: transform 350ms ease-in-out;\\n  width: 376px;\\n  min-height: 250px;\\n  transform-origin: 0% 100%;\\n  max-height: 644px;\\n  box-shadow: rgba(0, 0, 0, 0.16) 0px 5px 40px;\\n  opacity: 1;\\n  height: calc(100% - 120px);\\n  position: fixed;\\n  left: 24px;\\n  bottom: 24px; }\\n\\n.ccsdk .ifr {\\n  height: 100%;\\n  width: 100%;\\n  transform-origin: 0% 100%;\\n  border: 1px solid; }\\n\\n.ccsdk .close-btn {\\n  left: 16px;\\n  top: 16px;\\n  position: absolute;\\n  border-radius: 100%;\\n  width: 24px;\\n  height: 24px;\\n  padding: 2px;\\n  border: none;\\n  visibility: visible;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  cursor: pointer; }\\n  .ccsdk .close-btn .close-icon {\\n    width: 100%;\\n    height: 100%; }\\n  .ccsdk .close-btn.hidden {\\n    visibility: hidden; }\\n\\n@media screen and (max-width: 768px) {\\n  .ccsdk .ifr {\\n    height: 100%;\\n    width: 100%; }\\n  .ccsdk.ifr-cntr {\\n    min-height: 100%;\\n    max-height: 100%;\\n    height: 100%;\\n    width: 100%;\\n    left: 0;\\n    bottom: 0; }\\n    .ccsdk.ifr-cntr.at-login {\\n      min-height: 35%;\\n      max-height: 35%;\\n      height: 35%; }\\n  .ccsdk .close-btn {\\n    left: 8px;\\n    height: 23px;\\n    width: 23px; }\\n    .ccsdk .close-btn .close-icon {\\n      width: 22px;\\n      height: 22px; } }\\n\" : \".ccsdk.ifr-cntr {\\n  z-index: 9999;\\n  transition: transform 350ms ease-in-out;\\n  width: 376px;\\n  min-height: 250px;\\n  transform-origin: 100% 100%;\\n  max-height: 644px;\\n  box-shadow: rgba(0, 0, 0, 0.16) 0px 5px 40px;\\n  opacity: 1;\\n  height: calc(100% - 120px);\\n  position: fixed;\\n  right: 24px;\\n  bottom: 24px; }\\n\\n.ccsdk .ifr {\\n  height: 100%;\\n  width: 100%;\\n  transform-origin: 100% 100%;\\n  border: 1px solid; }\\n\\n.ccsdk .close-btn {\\n  right: 16px;\\n  top: 16px;\\n  position: absolute;\\n  border-radius: 100%;\\n  width: 24px;\\n  height: 24px;\\n  padding: 2px;\\n  border: none;\\n  visibility: visible;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  cursor: pointer; }\\n  .ccsdk .close-btn .close-icon {\\n    width: 100%;\\n    height: 100%; }\\n  .ccsdk .close-btn.hidden {\\n    visibility: hidden; }\\n\\n@media screen and (max-width: 768px) {\\n  .ccsdk .ifr {\\n    height: 100%;\\n    width: 100%; }\\n  .ccsdk.ifr-cntr {\\n    min-height: 100%;\\n    max-height: 100%;\\n    height: 100%;\\n    width: 100%;\\n    right: 0;\\n    bottom: 0; }\\n    .ccsdk.ifr-cntr.at-login {\\n      min-height: 35%;\\n      max-height: 35%;\\n      height: 35%; }\\n  .ccsdk .close-btn {\\n    right: 8px;\\n    height: 23px;\\n    width: 23px; }\\n    .ccsdk .close-btn .close-icon {\\n      width: 22px;\\n      height: 22px; } }\\n\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function() {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\tvar result = [];\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar item = this[i];\n\t\t\tif(item[2]) {\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\n\t\t\t} else {\n\t\t\t\tresult.push(item[1]);\n\t\t\t}\n\t\t}\n\t\treturn result.join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t}\n\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","//Manages trigger.\r\nimport { Cookie } from \"./helpers/Cookie\";\r\nimport { Constants } from \"./Constants\";\r\nimport { WebSurveyTriggers } from \"./WebSurveyTriggers\";\r\n\r\n//collect initial data\r\n//if on site time is null, add on site time\r\nif (Cookie.get(Constants.CCTriggerSiteStartTime) == null) {\r\n  Cookie.set(Constants.CCTriggerSiteStartTime, new Date(), undefined, undefined);\r\n}\r\n//always add on page Time\r\nCookie.set(Constants.CCTriggerPageStartTime, new Date(), undefined, undefined);\r\n\r\nlet sitePageViewCount = Cookie.get(Constants.CCTriggerSitePageViewCount);\r\nif (sitePageViewCount == null) {\r\n  Cookie.set(Constants.CCTriggerSitePageViewCount, 1, undefined, undefined);\r\n} else {\r\n  sitePageViewCount = (parseInt(sitePageViewCount) + 1).toString();\r\n  Cookie.set(Constants.CCTriggerSitePageViewCount, sitePageViewCount, undefined, undefined);\r\n}\r\n\r\nlet pathname = window.location.pathname;\r\nif (pathname.match(/\\./)) {\r\n  pathname = pathname.substring(0, pathname.lastIndexOf('/'));\r\n}\r\nlet individualPageViewCount = Cookie.get(Constants.CCTriggerIndividualPageViewCount);\r\nif (individualPageViewCount == null) {\r\n  Cookie.set(Constants.CCTriggerIndividualPageViewCount + pathname, 1, undefined, undefined);\r\n} else {\r\n  individualPageViewCount = (parseInt(individualPageViewCount) + 1).toString();\r\n  Cookie.set(Constants.CCTriggerIndividualPageViewCount + pathname, individualPageViewCount, undefined, undefined);\r\n}\r\n\r\n(window as any).click = 0;\r\n\r\nwindow.onscroll = function (e) {\r\n  // called when the window is scrolled.  \r\n  let doc = document.documentElement;\r\n  let left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\r\n  let top = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\r\n  (window as any).ccsdkTopOffset = top;\r\n  TriggerManager.processScrollTriggers(top);\r\n}\r\n\r\ndocument.onclick = function (e) {\r\n  (window as any).click++;\r\n}\r\n\r\n//TriggerManager adds to survey Queue\r\nclass TriggerManager {\r\n\r\n  static triggerInterval: any = null;\r\n  static triggerInstances: {\r\n    [key: string]: WebSurveyTriggers\r\n  } = {};\r\n\r\n  static enqueueSurvey: Function;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  static addSurvey(surveyId: any, trigger: WebSurveyTriggers) {\r\n    TriggerManager.triggerInstances[surveyId] = trigger;\r\n\r\n    trigger.evaluateCallBack = () => {\r\n      TriggerManager.enqueueSurvey && TriggerManager.enqueueSurvey(surveyId);\r\n    }\r\n\r\n    if (Object.keys(TriggerManager.triggerInstances).length >= 1) {\r\n      (window as any).ccsdkDebug ? console.log(TriggerManager.triggerInterval) : '';\r\n      if (TriggerManager.triggerInterval == null) {\r\n        (window as any).ccsdkDebug ? console.log(\"TriggerHandler : Setting up Interval Trigger Handlers.\") : '';\r\n        TriggerManager.triggerInterval = setInterval(TriggerManager.processIntervalTriggers, 1000);\r\n      }\r\n    }\r\n  }\r\n\r\n  static processIntervalTriggers() {\r\n    //if some survey is already running skip processing surveys for now?or queue it?.\r\n    let pathname = window.location.pathname;\r\n    if (pathname.match(/\\./)) {\r\n      pathname = pathname.substring(0, pathname.lastIndexOf('/'));\r\n    }\r\n    Cookie.set(Constants.CCTriggerPageElapsedTime + pathname, new Date(), undefined, undefined);\r\n    Cookie.set(Constants.CCTriggerSiteElapsedTime, new Date(), undefined, undefined);\r\n\r\n    for (let trigger in TriggerManager.triggerInstances) {\r\n      TriggerManager.triggerInstances[trigger].evaluateTriggers();\r\n      // TriggerManager.triggerInstances[trigger].processConditionalTriggers();\r\n    }\r\n  }\r\n\r\n\r\n  static processScrollTriggers(scrollY) {\r\n    for (let trigger in TriggerManager.triggerInstances) {\r\n      //process all scroll triggers.\r\n      TriggerManager.triggerInstances[trigger].evaluateTriggers();\r\n    }\r\n  }\r\n};\r\n\r\n\r\n\r\nexport { TriggerManager };","import { CCSDKConfig } from \"./interfaces/CCSDKConfig\";\r\nimport { Cookie } from \"./helpers/Cookie\";\r\nimport { Constants } from \"./Constants\";\r\nimport { TriggerUtils } from \"./helpers/TriggerUtils\";\r\n\r\nexport const SUPPORTED_TRIGGERS = [\r\n  \"click\",\r\n  \"waitSeconds\",\r\n  \"scrollPercent\",\r\n  \"grepURL\",\r\n  \"grepInvertURL\"\r\n];\r\n\r\nexport class WebSurveyTriggers {\r\n  config: CCSDKConfig;\r\n  evaluateCallBack: Function;\r\n  scrollTriggerPoint = 0;\r\n  constructor(config: CCSDKConfig) {\r\n    this.config = config;\r\n    if (this.config[\"scrollPercent\"]) {\r\n      this.scrollTriggerPoint =\r\n        (this.config[\"scrollPercent\"] *\r\n          (document.documentElement.scrollHeight ||\r\n            document.body.scrollHeight)) /\r\n        100;\r\n    }\r\n  }\r\n\r\n  evaluateTriggers() {\r\n    let showSurvey = true;\r\n\r\n    SUPPORTED_TRIGGERS.forEach((key) => {\r\n      if (this.config[key]) {\r\n        switch (key) {\r\n          case \"click\":\r\n            showSurvey =\r\n              showSurvey && (window as any).click >= this.config.click;\r\n            break;\r\n          case \"waitSeconds\":\r\n            // time spent on page\r\n            let pageStartTime = new Date(\r\n              Cookie.get(Constants.CCTriggerPageStartTime)\r\n            ).getTime();\r\n            let pathname = window.location.pathname;\r\n            if (pathname.match(/\\./)) {\r\n              pathname = pathname.substring(0, pathname.lastIndexOf(\"/\"));\r\n            }\r\n            let pageTime = new Date(\r\n              Cookie.get(Constants.CCTriggerPageElapsedTime + pathname)\r\n            ).getTime();\r\n            showSurvey =\r\n              showSurvey &&\r\n              TriggerUtils.checkTimeCondition(\r\n                pageTime,\r\n                pageStartTime,\r\n                this.config[key]\r\n              );\r\n            (window as any).ccsdkDebug\r\n              ? console.log(\"waitSeconds enabled\", showSurvey)\r\n              : \"\";\r\n            break;\r\n          case \"scrollPercent\":\r\n            //fill it with current scroll position\r\n            showSurvey =\r\n              showSurvey &&\r\n              TriggerUtils.checkScroll(\r\n                (window as any).ccsdkTopOffset,\r\n                this.scrollTriggerPoint\r\n              );\r\n            (window as any).ccsdkDebug\r\n              ? console.log(\"scrollPercent enabled\", showSurvey)\r\n              : \"\";\r\n\r\n            break;\r\n          case \"grepURL\":\r\n            showSurvey =\r\n              showSurvey && TriggerUtils.checkInUrl(this.config[key]);\r\n            (window as any).ccsdkDebug\r\n              ? console.log(\"grepURL enabled\", showSurvey)\r\n              : \"\";\r\n            break;\r\n          case \"grepInvertURL\":\r\n            showSurvey =\r\n              showSurvey && !TriggerUtils.checkInUrl(this.config[key]);\r\n            (window as any).ccsdkDebug\r\n              ? console.log(\"grepInvertURL enabled\", showSurvey)\r\n              : \"\";\r\n            break;\r\n        }\r\n      }\r\n    });\r\n\r\n    if (showSurvey) {\r\n      this.evaluateCallBack && this.evaluateCallBack();\r\n    }\r\n  }\r\n}\r\n","class TriggerUtils {\r\n  public static checkInUrl(inUrl: RegExp | string) {\r\n    return (\r\n      window.location.href.match(inUrl) != null &&\r\n      window.location.href.match(inUrl).length > 0\r\n    );\r\n  }\r\n\r\n  public static checkTimeCondition(\r\n    pageTime: number,\r\n    pageStartTime: number,\r\n    minPageTime: number\r\n  ) {\r\n    return Math.round((pageTime - pageStartTime) / 1000) > minPageTime;\r\n  }\r\n\r\n  public static checkScroll(scrollNow: number, minScrollPixels: number) {\r\n    return scrollNow > minScrollPixels;\r\n  }\r\n\r\n  public static checkPageCount(pageCount: number, minPageCount: number) {\r\n    return pageCount >= minPageCount;\r\n  }\r\n}\r\n\r\nexport { TriggerUtils };\r\n"],"sourceRoot":""}